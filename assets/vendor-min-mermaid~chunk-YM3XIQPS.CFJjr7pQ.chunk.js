import{f as k}from"./vendor-min-mermaid~chunk-TI4EEUUG.-07CF8yA.chunk.js";import{e as D,t as x,u as Y,h as J,G,Y as X,j as q,k as K,x as Q,f as V,s as Z,y as ee,z as te,o as re,A as ne,D as ie,I as ae,l as le,n as oe,J as se,K as ue,d as ce,Q as v,U as he,V as fe,g as w,i as ge}from"./vendor-min-mermaid~chunk-ZKYS2E5M.BYa6fn-6.chunk.js";import{k as b,t as de}from"./vendor-min-mermaid~chunk-6BY5RJGC.YZlq-A5J.chunk.js";import{m as o,q as xe}from"./vendor-min-mermaid~chunk-GTKDMUJJ.Cm7bUosf.chunk.js";var pe=xe(k()),ye="​",me={curveBasis:ce,curveBasisClosed:ue,curveBasisOpen:se,curveBumpX:oe,curveBumpY:le,curveBundle:ae,curveCardinalClosed:ie,curveCardinalOpen:ne,curveCardinal:re,curveCatmullRomClosed:te,curveCatmullRomOpen:ee,curveCatmullRom:Z,curveLinear:V,curveLinearClosed:Q,curveMonotoneX:K,curveMonotoneY:q,curveNatural:X,curveStep:G,curveStepAfter:J,curveStepBefore:Y},ve=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,$e=o(function(t,e){let r=T(t,/(?:init\b)|(?:initialize\b)/),n={};if(Array.isArray(r)){let l=r.map(u=>u.args);he(l),n=D(n,[...l])}else n=r.args;if(!n)return;let a=fe(t,e),i="config";return n[i]!==void 0&&(a==="flowchart-v2"&&(a="flowchart"),n[a]=n[i],delete n[i]),n},"detectInit"),T=o(function(t,e=null){var r,n;try{let a=new RegExp(`[%]{2}(?![{]${ve.source})(?=[}][%]{2}).*
`,"ig");t=t.trim().replace(a,"").replace(/'/gm,'"'),x.debug(`Detecting diagram directive${e!==null?" type:"+e:""} based on the text:${t}`);let i,l=[];for(;(i=v.exec(t))!==null;)if(i.index===v.lastIndex&&v.lastIndex++,i&&!e||e&&((r=i[1])==null?void 0:r.match(e))||e&&((n=i[2])==null?void 0:n.match(e))){let u=i[1]?i[1]:i[2],s=i[3]?i[3].trim():i[4]?JSON.parse(i[4].trim()):null;l.push({type:u,args:s})}return l.length===0?{type:t,args:null}:l.length===1?l[0]:l}catch(a){return x.error(`ERROR: ${a.message} - Unable to parse directive type: '${e}' based on the text: '${t}'`),{type:void 0,args:null}}},"detectDirective"),Re=o(function(t){return t.replace(v,"")},"removeDirectives"),Me=o(function(t,e){for(let[r,n]of e.entries())if(n.match(t))return r;return-1},"isSubstringInArray");function E(t,e){if(!t)return e;let r=`curve${t.charAt(0).toUpperCase()+t.slice(1)}`;return me[r]??e}o(E,"interpolateToCurve");function H(t,e){let r=t.trim();if(r)return e.securityLevel!=="loose"?(0,pe.sanitizeUrl)(r):r}o(H,"formatUrl");var we=o((t,...e)=>{let r=t.split("."),n=r.length-1,a=r[n],i=window;for(let l=0;l<n;l++)if(i=i[r[l]],!i){x.error(`Function name: ${t} not found in window`);return}i[a](...e)},"runFunc");function S(t,e){return!t||!e?0:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}o(S,"distance");function N(t){let e,r=0;t.forEach(a=>{r+=S(a,e),e=a});let n=r/2;return B(t,n)}o(N,"traverseEdge");function P(t){return t.length===1?t[0]:N(t)}o(P,"calcLabelPosition");var A=o((t,e=2)=>{let r=Math.pow(10,e);return Math.round(t*r)/r},"roundNumber"),B=o((t,e)=>{let r,n=e;for(let a of t){if(r){let i=S(a,r);if(i===0)return r;if(i<n)n-=i;else{let l=n/i;if(l<=0)return r;if(l>=1)return{x:a.x,y:a.y};if(l>0&&l<1)return{x:A((1-l)*r.x+l*a.x,5),y:A((1-l)*r.y+l*a.y,5)}}}r=a}throw new Error("Could not find a suitable point for the given distance")},"calculatePoint"),be=o((t,e,r)=>{x.info(`our points ${JSON.stringify(e)}`),e[0]!==r&&(e=e.reverse());let n=B(e,25),a=t?10:5,i=Math.atan2(e[0].y-n.y,e[0].x-n.x),l={x:0,y:0};return l.x=Math.sin(i)*a+(e[0].x+n.x)/2,l.y=-Math.cos(i)*a+(e[0].y+n.y)/2,l},"calcCardinalityPosition");function L(t,e,r){let n=structuredClone(r);x.info("our points",n),e!=="start_left"&&e!=="start_right"&&n.reverse();let a=25+t,i=B(n,a),l=10+t*.5,u=Math.atan2(n[0].y-i.y,n[0].x-i.x),s={x:0,y:0};return e==="start_left"?(s.x=Math.sin(u+Math.PI)*l+(n[0].x+i.x)/2,s.y=-Math.cos(u+Math.PI)*l+(n[0].y+i.y)/2):e==="end_right"?(s.x=Math.sin(u-Math.PI)*l+(n[0].x+i.x)/2-5,s.y=-Math.cos(u-Math.PI)*l+(n[0].y+i.y)/2-5):e==="end_left"?(s.x=Math.sin(u)*l+(n[0].x+i.x)/2-5,s.y=-Math.cos(u)*l+(n[0].y+i.y)/2-5):(s.x=Math.sin(u)*l+(n[0].x+i.x)/2,s.y=-Math.cos(u)*l+(n[0].y+i.y)/2),s}o(L,"calcTerminalLabelPosition");function R(t){let e="",r="";for(let n of t)n!==void 0&&(n.startsWith("color:")||n.startsWith("text-align:")?r=r+n+";":e=e+n+";");return{style:e,labelStyle:r}}o(R,"getStylesFromArray");var z=0,Se=o(()=>(z++,"id-"+Math.random().toString(36).substr(2,12)+"-"+z),"generateId");function j(t){let e="",r="0123456789abcdef",n=r.length;for(let a=0;a<t;a++)e+=r.charAt(Math.floor(Math.random()*n));return e}o(j,"makeRandomHex");var Be=o(t=>j(t.length),"random"),Ce=o(function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},"getTextObj"),Ie=o(function(t,e){let r=e.text.replace(w.lineBreakRegex," "),[,n]=I(e.fontSize),a=t.append("text");a.attr("x",e.x),a.attr("y",e.y),a.style("text-anchor",e.anchor),a.style("font-family",e.fontFamily),a.style("font-size",n),a.style("font-weight",e.fontWeight),a.attr("fill",e.fill),e.class!==void 0&&a.attr("class",e.class);let i=a.append("tspan");return i.attr("x",e.x+e.textMargin*2),i.attr("fill",e.fill),i.text(r),a},"drawSimpleText"),We=b((t,e,r)=>{if(!t||(r=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},r),w.lineBreakRegex.test(t)))return t;let n=t.split(" ").filter(Boolean),a=[],i="";return n.forEach((l,u)=>{let s=p(`${l} `,r),c=p(i,r);if(s>e){let{hyphenatedStrings:h,remainingWord:d}=Fe(l,e,"-",r);a.push(i,...h),i=d}else c+s>=e?(a.push(i),i=l):i=[i,l].filter(Boolean).join(" ");u+1===n.length&&a.push(i)}),a.filter(l=>l!=="").join(r.joinWith)},(t,e,r)=>`${t}${e}${r.fontSize}${r.fontWeight}${r.fontFamily}${r.joinWith}`),Fe=b((t,e,r="-",n)=>{n=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},n);let a=[...t],i=[],l="";return a.forEach((u,s)=>{let c=`${l}${u}`;if(p(c,n)>=e){let h=s+1,d=a.length===h,$=`${c}${r}`;i.push(d?c:$),l=""}else l=c}),{hyphenatedStrings:i,remainingWord:l}},(t,e,r="-",n)=>`${t}${e}${r}${n.fontSize}${n.fontWeight}${n.fontFamily}`);function _(t,e){return C(t,e).height}o(_,"calculateTextHeight");function p(t,e){return C(t,e).width}o(p,"calculateTextWidth");var C=b((t,e)=>{let{fontSize:r=12,fontFamily:n="Arial",fontWeight:a=400}=e;if(!t)return{width:0,height:0};let[,i]=I(r),l=["sans-serif",n],u=t.split(w.lineBreakRegex),s=[],c=ge("body");if(!c.remove)return{width:0,height:0,lineHeight:0};let h=c.append("svg");for(let $ of l){let M=0,f={width:0,height:0,lineHeight:0};for(let U of u){let W=Ce();W.text=U||ye;let F=Ie(h,W).style("font-size",i).style("font-weight",a).style("font-family",$),y=(F._groups||F)[0][0].getBBox();if(y.width===0&&y.height===0)throw new Error("svg element not in render tree");f.width=Math.round(Math.max(f.width,y.width)),M=Math.round(y.height),f.height+=M,f.lineHeight=Math.round(Math.max(f.lineHeight,M))}s.push(f)}h.remove();let d=isNaN(s[1].height)||isNaN(s[1].width)||isNaN(s[1].lineHeight)||s[0].height>s[1].height&&s[0].width>s[1].width&&s[0].lineHeight>s[1].lineHeight?0:1;return s[d]},(t,e)=>`${t}${e.fontSize}${e.fontWeight}${e.fontFamily}`),g,Ae=(g=class{constructor(e=!1,r){this.count=0,this.count=r?r.length:0,this.next=e?()=>this.count++:()=>Date.now()}},o(g,"InitIDGenerator"),g),m,ze=o(function(t){return m=m||document.createElement("div"),t=escape(t).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),m.innerHTML=t,unescape(m.textContent)},"entityDecode");function De(t){return"str"in t}o(De,"isDetailedError");var Te=o((t,e,r,n)=>{var i;if(!n)return;let a=(i=t.node())==null?void 0:i.getBBox();a&&t.append("text").text(n).attr("text-anchor","middle").attr("x",a.x+a.width/2).attr("y",-r).attr("class",e)},"insertTitle"),I=o(t=>{if(typeof t=="number")return[t,t+"px"];let e=parseInt(t??"",10);return Number.isNaN(e)?[void 0,void 0]:t===String(e)?[e,t+"px"]:[e,t]},"parseFontSize");function O(t,e){return de({},t,e)}o(O,"cleanAndMerge");var je={assignWithDepth:D,wrapLabel:We,calculateTextHeight:_,calculateTextWidth:p,calculateTextDimensions:C,cleanAndMerge:O,detectInit:$e,detectDirective:T,isSubstringInArray:Me,interpolateToCurve:E,calcLabelPosition:P,calcCardinalityPosition:be,calcTerminalLabelPosition:L,formatUrl:H,getStylesFromArray:R,generateId:Se,random:Be,runFunc:we,entityDecode:ze,insertTitle:Te,parseFontSize:I,InitIDGenerator:Ae},_e=o(function(t){let e=t;return e=e.replace(/style.*:\S*#.*;/g,function(r){return r.substring(0,r.length-1)}),e=e.replace(/classDef.*:\S*#.*;/g,function(r){return r.substring(0,r.length-1)}),e=e.replace(/#\w+;/g,function(r){let n=r.substring(1,r.length-1);return/^\+?\d+$/.test(n)?"ﬂ°°"+n+"¶ß":"ﬂ°"+n+"¶ß"}),e},"encodeEntities"),Oe=o(function(t){return t.replace(/ﬂ°°/g,"&#").replace(/ﬂ°/g,"&").replace(/¶ß/g,";")},"decodeEntities"),Ue=o((t,e,{counter:r=0,prefix:n,suffix:a},i)=>i||`${n?`${n}_`:""}${t}_${e}_${r}${a?`_${a}`:""}`,"getEdgeId");function Ee(t){return t??null}o(Ee,"handleUndefinedAttr");export{We as $,Se as C,Re as H,je as I,Ee as J,O as L,p as M,I as S,_e as U,_ as W,Oe as X,Ue as Y,R as b,ye as c,E as d,Be as w,De as z};
