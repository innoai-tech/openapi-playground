import{O as e,B as t,S as r,g as s,t as n,h as a,e as i,j as o,o as u}from"./vendor-rxjs.5nMifnmB.chunk.js";import{b as c,v as p,d as h,e as d,a as l}from"./vendor-innoai-tech-lodash.CuH5DnrJ.chunk.js";let f=(e,t)=>new g(e,t);class g extends e{constructor(e,t){super(e=>this._success$.subscribe(e)),this.createConfig=e,this.fetcher=t}requesting$=new t(!1);error$=new r;_success$=new r;_input$=new r;get operationID(){return this.createConfig.operationID}unsubscribe=this._input$.pipe(s(e=>(this.requesting$.next(!0),i(this.fetcher.request(this.createConfig(e))).pipe(n(e=>this._success$.next(e)),o(e=>(this.error$.next(e),u(e)))))),n(()=>{this.requesting$.next(!1)}),a()).subscribe();_prevInputs;next=e=>{let t=c(e)?e(this._prevInputs):e;this._prevInputs=t,this._input$.next(t)};toHref=e=>this.fetcher.toHref(this.createConfig(e))}let y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e["Content-Type"]||e["content-type"]||""},$=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e["Content-Type"]&&(e["Content-Type"]=void 0),e["content-type"]&&(e["content-type"]=void 0)},m=e=>y(e).includes("multipart/form-data"),b=e=>y(e).includes("application/x-www-form-urlencoded"),w=e=>{let t=new URLSearchParams,r=(e,s)=>{if(h(s)){p(s,t=>{r(e,t)});return}if(d(s)){r(e,JSON.stringify(s));return}l(s)||0===`${s}`.length||t.append(e,`${s}`)};return p(e,(e,t)=>{r(t,e)}),t.toString()},x=(e,t)=>{if(m(t)){$(t);let r=new FormData,s=(e,t)=>{t instanceof File||t instanceof Blob?r.append(e,t):h(t)?p(t,t=>s(e,t)):d(t)?r.append(e,JSON.stringify(t)):r.append(e,t)};return p(e,(e,t)=>s(t,e)),r}return b(t)?w(e):h(e)||d(e)?JSON.stringify(e):e},v=e=>{let{paramsSerializer:t,transformRequestBody:r}=e;return{toHref:e=>{let r=t(e.params);return r.length&&!r.startsWith("?")&&(r="?"+r),`${e.url}${r}`},request:e=>{let s={method:e.method,headers:e.headers||{},body:r(e.body,e.headers||{})};return fetch(`${e.url}?${t(e.params)}`,s).then(async t=>{let r;r=t.headers.get("Content-Type")?.includes("application/json")?await t.json():t.headers.get("Content-Type")?.includes("application/octet-stream")?await t.blob():await t.text();let s={config:e,status:t.status,headers:{}};for(let[e,r]of t.headers)s.headers[e]=r;return s.body=r,s}).then(e=>{if(e.status>=400)throw e.error=e.body,e;return e})}}};export{f as a,v as c,w as p,x as t};
