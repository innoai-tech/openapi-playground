import{S as tt}from"./vendor-min-mermaid~chunk-2VPXETT4.CdsYqdws.chunk.js";import{n as At}from"./vendor-min-mermaid~chunk-LM6QDVU5.BWR0rveQ.chunk.js";import{Q as ye}from"./vendor-min-mermaid~chunk-HESFG3RP.BcmAS4U7.chunk.js";import{J as ee,X as _e,S as sl,M as at}from"./vendor-min-mermaid~chunk-YM3XIQPS.CFJjr7pQ.chunk.js";import{t as G,H as Q,m as Y,i as J,O as Lt,p as rl,E as Ie,R as Nt,C as il,g as nl,r as Rt,q as Bt}from"./vendor-min-mermaid~chunk-ZKYS2E5M.BYa6fn-6.chunk.js";import{m as b}from"./vendor-min-mermaid~chunk-GTKDMUJJ.Cm7bUosf.chunk.js";var z=b(async(h,e,r)=>{var c,p;let l,t=e.useHtmlLabels||Y((c=Q())==null?void 0:c.htmlLabels);r?l=r:l="node default";let i=h.insert("g").attr("class",l).attr("id",e.domId||e.id),o=i.insert("g").attr("class","label").attr("style",ee(e.labelStyle)),a;e.label===void 0?a="":a=typeof e.label=="string"?e.label:e.label[0];let d=await ye(o,Lt(_e(a),Q()),{useHtmlLabels:t,width:e.width||((p=Q().flowchart)==null?void 0:p.wrappingWidth),cssClasses:"markdown-node-label",style:e.labelStyle,addSvgBackground:!!e.icon||!!e.img}),s=d.getBBox(),n=((e==null?void 0:e.padding)??0)/2;if(t){let g=d.children[0],y=J(d),f=g.getElementsByTagName("img");if(f){let m=a.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...f].map(u=>new Promise(x=>{function w(){if(u.style.display="flex",u.style.flexDirection="column",m){let M=Q().fontSize?Q().fontSize:window.getComputedStyle(document.body).fontSize,S=5,[k=rl.fontSize]=sl(M),$=k*S+"px";u.style.minWidth=$,u.style.maxWidth=$}else u.style.width="100%";x(u)}b(w,"setupImage"),setTimeout(()=>{u.complete&&w()}),u.addEventListener("error",w),u.addEventListener("load",w)})))}s=g.getBoundingClientRect(),y.attr("width",s.width),y.attr("height",s.height)}return t?o.attr("transform","translate("+-s.width/2+", "+-s.height/2+")"):o.attr("transform","translate(0, "+-s.height/2+")"),e.centerLabel&&o.attr("transform","translate("+-s.width/2+", "+-s.height/2+")"),o.insert("rect",":first-child"),{shapeSvg:i,bbox:s,halfPadding:n,label:o}},"labelHelper"),it=b(async(h,e,r)=>{var d,s,n,c,p,g;let l=r.useHtmlLabels||Y((s=(d=Q())==null?void 0:d.flowchart)==null?void 0:s.htmlLabels),t=h.insert("g").attr("class","label").attr("style",r.labelStyle||""),i=await ye(t,Lt(_e(e),Q()),{useHtmlLabels:l,width:r.width||((c=(n=Q())==null?void 0:n.flowchart)==null?void 0:c.wrappingWidth),style:r.labelStyle,addSvgBackground:!!r.icon||!!r.img}),o=i.getBBox(),a=r.padding/2;if(Y((g=(p=Q())==null?void 0:p.flowchart)==null?void 0:g.htmlLabels)){let y=i.children[0],f=J(i);o=y.getBoundingClientRect(),f.attr("width",o.width),f.attr("height",o.height)}return l?t.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"):t.attr("transform","translate(0, "+-o.height/2+")"),r.centerLabel&&t.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"),t.insert("rect",":first-child"),{shapeSvg:h,bbox:o,halfPadding:a,label:t}},"insertLabel"),j=b((h,e)=>{let r=e.node().getBBox();h.width=r.width,h.height=r.height},"updateNodeBounds"),q=b((h,e)=>(h.look==="handDrawn"?"rough-node":"node")+" "+h.cssClasses+" "+(e||""),"getNodeClasses");function F(h){let e=h.map((r,l)=>`${l===0?"M":"L"}${r.x},${r.y}`);return e.push("Z"),e.join(" ")}b(F,"createPathFromPoints");function ge(h,e,r,l,t,i){let o=[],a=r-h,d=l-e,s=a/i,n=2*Math.PI/s,c=e+d/2;for(let p=0;p<=50;p++){let g=p/50,y=h+g*a,f=c+t*Math.sin(n*(y-h));o.push({x:y,y:f})}return o}b(ge,"generateFullSineWavePoints");function xt(h,e,r,l,t,i){let o=[],a=t*Math.PI/180,d=(i*Math.PI/180-a)/(l-1);for(let s=0;s<l;s++){let n=a+s*d,c=h+r*Math.cos(n),p=e+r*Math.sin(n);o.push({x:-c,y:-p})}return o}b(xt,"generateCirclePoints");function Qe(h,e,r){if(h&&h.length){let[l,t]=e,i=Math.PI/180*r,o=Math.cos(i),a=Math.sin(i);for(let d of h){let[s,n]=d;d[0]=(s-l)*o-(n-t)*a+l,d[1]=(s-l)*a+(n-t)*o+t}}}b(Qe,"t");function Tt(h,e){return h[0]===e[0]&&h[1]===e[1]}b(Tt,"e");function It(h,e,r,l=1){let t=r,i=Math.max(e,.1),o=h[0]&&h[0][0]&&typeof h[0][0]=="number"?[h]:h,a=[0,0];if(t)for(let s of o)Qe(s,a,t);let d=function(s,n,c){let p=[];for(let x of s){let w=[...x];Tt(w[0],w[w.length-1])||w.push([w[0][0],w[0][1]]),w.length>2&&p.push(w)}let g=[];n=Math.max(n,.1);let y=[];for(let x of p)for(let w=0;w<x.length-1;w++){let M=x[w],S=x[w+1];if(M[1]!==S[1]){let k=Math.min(M[1],S[1]);y.push({ymin:k,ymax:Math.max(M[1],S[1]),x:k===M[1]?M[0]:S[0],islope:(S[0]-M[0])/(S[1]-M[1])})}}if(y.sort((x,w)=>x.ymin<w.ymin?-1:x.ymin>w.ymin?1:x.x<w.x?-1:x.x>w.x?1:x.ymax===w.ymax?0:(x.ymax-w.ymax)/Math.abs(x.ymax-w.ymax)),!y.length)return g;let f=[],m=y[0].ymin,u=0;for(;f.length||y.length;){if(y.length){let x=-1;for(let w=0;w<y.length&&!(y[w].ymin>m);w++)x=w;y.splice(0,x+1).forEach(w=>{f.push({s:m,edge:w})})}if(f=f.filter(x=>!(x.edge.ymax<=m)),f.sort((x,w)=>x.edge.x===w.edge.x?0:(x.edge.x-w.edge.x)/Math.abs(x.edge.x-w.edge.x)),(c!==1||u%n==0)&&f.length>1)for(let x=0;x<f.length;x+=2){let w=x+1;if(w>=f.length)break;let M=f[x].edge,S=f[w].edge;g.push([[Math.round(M.x),m],[Math.round(S.x),m]])}m+=c,f.forEach(x=>{x.edge.x=x.edge.x+c*x.edge.islope}),u++}return g}(o,i,l);if(t){for(let s of o)Qe(s,a,-t);(function(s,n,c){let p=[];s.forEach(g=>p.push(...g)),Qe(p,n,c)})(d,a,-t)}return d}b(It,"s");function Be(h,e){var r;let l=e.hachureAngle+90,t=e.hachureGap;t<0&&(t=4*e.strokeWidth),t=Math.round(Math.max(t,.1));let i=1;return e.roughness>=1&&(((r=e.randomizer)===null||r===void 0?void 0:r.next())||Math.random())>.7&&(i=t),It(h,t,l,i||1)}b(Be,"n");var xe,bt=(xe=class{constructor(e){this.helper=e}fillPolygons(e,r){return this._fillPolygons(e,r)}_fillPolygons(e,r){let l=Be(e,r);return{type:"fillSketch",ops:this.renderLines(l,r)}}renderLines(e,r){let l=[];for(let t of e)l.push(...this.helper.doubleLineOps(t[0][0],t[0][1],t[1][0],t[1][1],r));return l}},b(xe,"o"),xe);function qe(h){let e=h[0],r=h[1];return Math.sqrt(Math.pow(e[0]-r[0],2)+Math.pow(e[1]-r[1],2))}b(qe,"a");var be,hl=(be=class extends bt{fillPolygons(e,r){let l=r.hachureGap;l<0&&(l=4*r.strokeWidth),l=Math.max(l,.1);let t=Be(e,Object.assign({},r,{hachureGap:l})),i=Math.PI/180*r.hachureAngle,o=[],a=.5*l*Math.cos(i),d=.5*l*Math.sin(i);for(let[s,n]of t)qe([s,n])&&o.push([[s[0]-a,s[1]+d],[...n]],[[s[0]+a,s[1]-d],[...n]]);return{type:"fillSketch",ops:this.renderLines(o,r)}}},b(be,"h"),be),we,ol=(we=class extends bt{fillPolygons(e,r){let l=this._fillPolygons(e,r),t=Object.assign({},r,{hachureAngle:r.hachureAngle+90}),i=this._fillPolygons(e,t);return l.ops=l.ops.concat(i.ops),l}},b(we,"r"),we),Se,dl=(Se=class{constructor(e){this.helper=e}fillPolygons(e,r){let l=Be(e,r=Object.assign({},r,{hachureAngle:0}));return this.dotsOnLines(l,r)}dotsOnLines(e,r){let l=[],t=r.hachureGap;t<0&&(t=4*r.strokeWidth),t=Math.max(t,.1);let i=r.fillWeight;i<0&&(i=r.strokeWidth/2);let o=t/4;for(let a of e){let d=qe(a),s=d/t,n=Math.ceil(s)-1,c=d-n*t,p=(a[0][0]+a[1][0])/2-t/4,g=Math.min(a[0][1],a[1][1]);for(let y=0;y<n;y++){let f=g+c+y*t,m=p-o+2*Math.random()*o,u=f-o+2*Math.random()*o,x=this.helper.ellipse(m,u,i,i,r);l.push(...x.ops)}}return{type:"fillSketch",ops:l}}},b(Se,"i"),Se),ke,cl=(ke=class{constructor(e){this.helper=e}fillPolygons(e,r){let l=Be(e,r);return{type:"fillSketch",ops:this.dashedLine(l,r)}}dashedLine(e,r){let l=r.dashOffset<0?r.hachureGap<0?4*r.strokeWidth:r.hachureGap:r.dashOffset,t=r.dashGap<0?r.hachureGap<0?4*r.strokeWidth:r.hachureGap:r.dashGap,i=[];return e.forEach(o=>{let a=qe(o),d=Math.floor(a/(l+t)),s=(a+t-d*(l+t))/2,n=o[0],c=o[1];n[0]>c[0]&&(n=o[1],c=o[0]);let p=Math.atan((c[1]-n[1])/(c[0]-n[0]));for(let g=0;g<d;g++){let y=g*(l+t),f=y+l,m=[n[0]+y*Math.cos(p)+s*Math.cos(p),n[1]+y*Math.sin(p)+s*Math.sin(p)],u=[n[0]+f*Math.cos(p)+s*Math.cos(p),n[1]+f*Math.sin(p)+s*Math.sin(p)];i.push(...this.helper.doubleLineOps(m[0],m[1],u[0],u[1],r))}}),i}},b(ke,"c"),ke),Me,gl=(Me=class{constructor(e){this.helper=e}fillPolygons(e,r){let l=r.hachureGap<0?4*r.strokeWidth:r.hachureGap,t=r.zigzagOffset<0?l:r.zigzagOffset,i=Be(e,r=Object.assign({},r,{hachureGap:l+t}));return{type:"fillSketch",ops:this.zigzagLines(i,t,r)}}zigzagLines(e,r,l){let t=[];return e.forEach(i=>{let o=qe(i),a=Math.round(o/(2*r)),d=i[0],s=i[1];d[0]>s[0]&&(d=i[1],s=i[0]);let n=Math.atan((s[1]-d[1])/(s[0]-d[0]));for(let c=0;c<a;c++){let p=2*c*r,g=2*(c+1)*r,y=Math.sqrt(2*Math.pow(r,2)),f=[d[0]+p*Math.cos(n),d[1]+p*Math.sin(n)],m=[d[0]+g*Math.cos(n),d[1]+g*Math.sin(n)],u=[f[0]+y*Math.cos(n+Math.PI/4),f[1]+y*Math.sin(n+Math.PI/4)];t.push(...this.helper.doubleLineOps(f[0],f[1],u[0],u[1],l),...this.helper.doubleLineOps(u[0],u[1],m[0],m[1],l))}}),t}},b(Me,"l"),Me),U={},$e,pl=($e=class{constructor(e){this.seed=e}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}},b($e,"p"),$e),yl=0,nt=1,Ct=2,Ge={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function Ze(h,e){return h.type===e}b(Ze,"k");function lt(h){let e=[],r=function(o){let a=new Array;for(;o!=="";)if(o.match(/^([ \t\r\n,]+)/))o=o.substr(RegExp.$1.length);else if(o.match(/^([aAcChHlLmMqQsStTvVzZ])/))a[a.length]={type:yl,text:RegExp.$1},o=o.substr(RegExp.$1.length);else{if(!o.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];a[a.length]={type:nt,text:`${parseFloat(RegExp.$1)}`},o=o.substr(RegExp.$1.length)}return a[a.length]={type:Ct,text:""},a}(h),l="BOD",t=0,i=r[t];for(;!Ze(i,Ct);){let o=0,a=[];if(l==="BOD"){if(i.text!=="M"&&i.text!=="m")return lt("M0,0"+h);t++,o=Ge[i.text],l=i.text}else Ze(i,nt)?o=Ge[l]:(t++,o=Ge[i.text],l=i.text);if(!(t+o<r.length))throw new Error("Path data ended short");for(let d=t;d<t+o;d++){let s=r[d];if(!Ze(s,nt))throw new Error("Param not a number: "+l+","+s.text);a[a.length]=+s.text}if(typeof Ge[l]!="number")throw new Error("Bad segment: "+l);{let d={key:l,data:a};e.push(d),t+=o,i=r[t],l==="M"&&(l="L"),l==="m"&&(l="l")}}return e}b(lt,"b");function wt(h){let e=0,r=0,l=0,t=0,i=[];for(let{key:o,data:a}of h)switch(o){case"M":i.push({key:"M",data:[...a]}),[e,r]=a,[l,t]=a;break;case"m":e+=a[0],r+=a[1],i.push({key:"M",data:[e,r]}),l=e,t=r;break;case"L":i.push({key:"L",data:[...a]}),[e,r]=a;break;case"l":e+=a[0],r+=a[1],i.push({key:"L",data:[e,r]});break;case"C":i.push({key:"C",data:[...a]}),e=a[4],r=a[5];break;case"c":{let d=a.map((s,n)=>n%2?s+r:s+e);i.push({key:"C",data:d}),e=d[4],r=d[5];break}case"Q":i.push({key:"Q",data:[...a]}),e=a[2],r=a[3];break;case"q":{let d=a.map((s,n)=>n%2?s+r:s+e);i.push({key:"Q",data:d}),e=d[2],r=d[3];break}case"A":i.push({key:"A",data:[...a]}),e=a[5],r=a[6];break;case"a":e+=a[5],r+=a[6],i.push({key:"A",data:[a[0],a[1],a[2],a[3],a[4],e,r]});break;case"H":i.push({key:"H",data:[...a]}),e=a[0];break;case"h":e+=a[0],i.push({key:"H",data:[e]});break;case"V":i.push({key:"V",data:[...a]}),r=a[0];break;case"v":r+=a[0],i.push({key:"V",data:[r]});break;case"S":i.push({key:"S",data:[...a]}),e=a[2],r=a[3];break;case"s":{let d=a.map((s,n)=>n%2?s+r:s+e);i.push({key:"S",data:d}),e=d[2],r=d[3];break}case"T":i.push({key:"T",data:[...a]}),e=a[0],r=a[1];break;case"t":e+=a[0],r+=a[1],i.push({key:"T",data:[e,r]});break;case"Z":case"z":i.push({key:"Z",data:[]}),e=l,r=t}return i}b(wt,"y");function St(h){let e=[],r="",l=0,t=0,i=0,o=0,a=0,d=0;for(let{key:s,data:n}of h){switch(s){case"M":e.push({key:"M",data:[...n]}),[l,t]=n,[i,o]=n;break;case"C":e.push({key:"C",data:[...n]}),l=n[4],t=n[5],a=n[2],d=n[3];break;case"L":e.push({key:"L",data:[...n]}),[l,t]=n;break;case"H":l=n[0],e.push({key:"L",data:[l,t]});break;case"V":t=n[0],e.push({key:"L",data:[l,t]});break;case"S":{let c=0,p=0;r==="C"||r==="S"?(c=l+(l-a),p=t+(t-d)):(c=l,p=t),e.push({key:"C",data:[c,p,...n]}),a=n[0],d=n[1],l=n[2],t=n[3];break}case"T":{let[c,p]=n,g=0,y=0;r==="Q"||r==="T"?(g=l+(l-a),y=t+(t-d)):(g=l,y=t);let f=l+2*(g-l)/3,m=t+2*(y-t)/3,u=c+2*(g-c)/3,x=p+2*(y-p)/3;e.push({key:"C",data:[f,m,u,x,c,p]}),a=g,d=y,l=c,t=p;break}case"Q":{let[c,p,g,y]=n,f=l+2*(c-l)/3,m=t+2*(p-t)/3,u=g+2*(c-g)/3,x=y+2*(p-y)/3;e.push({key:"C",data:[f,m,u,x,g,y]}),a=c,d=p,l=g,t=y;break}case"A":{let c=Math.abs(n[0]),p=Math.abs(n[1]),g=n[2],y=n[3],f=n[4],m=n[5],u=n[6];c===0||p===0?(e.push({key:"C",data:[l,t,m,u,m,u]}),l=m,t=u):(l!==m||t!==u)&&(kt(l,t,m,u,c,p,g,y,f).forEach(function(x){e.push({key:"C",data:x})}),l=m,t=u);break}case"Z":e.push({key:"Z",data:[]}),l=i,t=o}r=s}return e}b(St,"m");function fe(h,e,r){return[h*Math.cos(r)-e*Math.sin(r),h*Math.sin(r)+e*Math.cos(r)]}b(fe,"w");function kt(h,e,r,l,t,i,o,a,d,s){let n=(c=o,Math.PI*c/180);var c;let p=[],g=0,y=0,f=0,m=0;if(s)[g,y,f,m]=s;else{[h,e]=fe(h,e,-n),[r,l]=fe(r,l,-n);let P=(h-r)/2,C=(e-l)/2,R=P*P/(t*t)+C*C/(i*i);R>1&&(R=Math.sqrt(R),t*=R,i*=R);let A=t*t,T=i*i,I=A*T-A*C*C-T*P*P,Z=A*C*C+T*P*P,K=(a===d?-1:1)*Math.sqrt(Math.abs(I/Z));f=K*t*C/i+(h+r)/2,m=K*-i*P/t+(e+l)/2,g=Math.asin(parseFloat(((e-m)/i).toFixed(9))),y=Math.asin(parseFloat(((l-m)/i).toFixed(9))),h<f&&(g=Math.PI-g),r<f&&(y=Math.PI-y),g<0&&(g=2*Math.PI+g),y<0&&(y=2*Math.PI+y),d&&g>y&&(g-=2*Math.PI),!d&&y>g&&(y-=2*Math.PI)}let u=y-g;if(Math.abs(u)>120*Math.PI/180){let P=y,C=r,R=l;y=d&&y>g?g+120*Math.PI/180*1:g+120*Math.PI/180*-1,p=kt(r=f+t*Math.cos(y),l=m+i*Math.sin(y),C,R,t,i,o,0,d,[y,P,f,m])}u=y-g;let x=Math.cos(g),w=Math.sin(g),M=Math.cos(y),S=Math.sin(y),k=Math.tan(u/4),$=4/3*t*k,D=4/3*i*k,N=[h,e],B=[h+$*w,e-D*x],v=[r+$*S,l-D*M],H=[r,l];if(B[0]=2*N[0]-B[0],B[1]=2*N[1]-B[1],s)return[B,v,H].concat(p);{p=[B,v,H].concat(p);let P=[];for(let C=0;C<p.length;C+=3){let R=fe(p[C][0],p[C][1],n),A=fe(p[C+1][0],p[C+1][1],n),T=fe(p[C+2][0],p[C+2][1],n);P.push([R[0],R[1],A[0],A[1],T[0],T[1]])}return P}}b(kt,"x");var fl={randOffset:b(function(h,e){return _(h,e)},"randOffset"),randOffsetWithRange:b(function(h,e,r){return je(h,e,r)},"randOffsetWithRange"),ellipse:b(function(h,e,r,l,t){let i=$t(r,l,t);return Ye(h,e,t,i).opset},"ellipse"),doubleLineOps:b(function(h,e,r,l,t){return he(h,e,r,l,t,!0)},"doubleLineOps")};function Mt(h,e,r,l,t){return{type:"path",ops:he(h,e,r,l,t)}}b(Mt,"v");function Oe(h,e,r){let l=(h||[]).length;if(l>2){let t=[];for(let i=0;i<l-1;i++)t.push(...he(h[i][0],h[i][1],h[i+1][0],h[i+1][1],r));return e&&t.push(...he(h[l-1][0],h[l-1][1],h[0][0],h[0][1],r)),{type:"path",ops:t}}return l===2?Mt(h[0][0],h[0][1],h[1][0],h[1][1],r):{type:"path",ops:[]}}b(Oe,"S");function Ot(h,e,r,l,t){return function(i,o){return Oe(i,!0,o)}([[h,e],[h+r,e],[h+r,e+l],[h,e+l]],t)}b(Ot,"O");function ht(h,e){if(h.length){let r=typeof h[0][0]=="number"?[h]:h,l=Re(r[0],1*(1+.2*e.roughness),e),t=e.disableMultiStroke?[]:Re(r[0],1.5*(1+.22*e.roughness),ct(e));for(let i=1;i<r.length;i++){let o=r[i];if(o.length){let a=Re(o,1*(1+.2*e.roughness),e),d=e.disableMultiStroke?[]:Re(o,1.5*(1+.22*e.roughness),ct(e));for(let s of a)s.op!=="move"&&l.push(s);for(let s of d)s.op!=="move"&&t.push(s)}}return{type:"path",ops:l.concat(t)}}return{type:"path",ops:[]}}b(ht,"L");function $t(h,e,r){let l=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(h/2,2)+Math.pow(e/2,2))/2)),t=Math.ceil(Math.max(r.curveStepCount,r.curveStepCount/Math.sqrt(200)*l)),i=2*Math.PI/t,o=Math.abs(h/2),a=Math.abs(e/2),d=1-r.curveFitting;return o+=_(o*d,r),a+=_(a*d,r),{increment:i,rx:o,ry:a}}b($t,"T");function Ye(h,e,r,l){let[t,i]=gt(l.increment,h,e,l.rx,l.ry,1,l.increment*je(.1,je(.4,1,r),r),r),o=We(t,null,r);if(!r.disableMultiStroke&&r.roughness!==0){let[a]=gt(l.increment,h,e,l.rx,l.ry,1.5,0,r),d=We(a,null,r);o=o.concat(d)}return{estimatedPoints:i,opset:{type:"path",ops:o}}}b(Ye,"D");function ot(h,e,r,l,t,i,o,a,d){let s=h,n=e,c=Math.abs(r/2),p=Math.abs(l/2);c+=_(.01*c,d),p+=_(.01*p,d);let g=t,y=i;for(;g<0;)g+=2*Math.PI,y+=2*Math.PI;y-g>2*Math.PI&&(g=0,y=2*Math.PI);let f=2*Math.PI/d.curveStepCount,m=Math.min(f/2,(y-g)/2),u=pt(m,s,n,c,p,g,y,1,d);if(!d.disableMultiStroke){let x=pt(m,s,n,c,p,g,y,1.5,d);u.push(...x)}return o&&(a?u.push(...he(s,n,s+c*Math.cos(g),n+p*Math.sin(g),d),...he(s,n,s+c*Math.cos(y),n+p*Math.sin(y),d)):u.push({op:"lineTo",data:[s,n]},{op:"lineTo",data:[s+c*Math.cos(g),n+p*Math.sin(g)]})),{type:"path",ops:u}}b(ot,"A");function dt(h,e){let r=St(wt(lt(h))),l=[],t=[0,0],i=[0,0];for(let{key:o,data:a}of r)switch(o){case"M":i=[a[0],a[1]],t=[a[0],a[1]];break;case"L":l.push(...he(i[0],i[1],a[0],a[1],e)),i=[a[0],a[1]];break;case"C":{let[d,s,n,c,p,g]=a;l.push(...Et(d,s,n,c,p,g,i,e)),i=[p,g];break}case"Z":l.push(...he(i[0],i[1],t[0],t[1],e)),i=[t[0],t[1]]}return{type:"path",ops:l}}b(dt,"_");function Xe(h,e){let r=[];for(let l of h)if(l.length){let t=e.maxRandomnessOffset||0,i=l.length;if(i>2){r.push({op:"move",data:[l[0][0]+_(t,e),l[0][1]+_(t,e)]});for(let o=1;o<i;o++)r.push({op:"lineTo",data:[l[o][0]+_(t,e),l[o][1]+_(t,e)]})}}return{type:"fillPath",ops:r}}b(Xe,"I");function pe(h,e){return function(r,l){let t=r.fillStyle||"hachure";if(!U[t])switch(t){case"zigzag":U[t]||(U[t]=new hl(l));break;case"cross-hatch":U[t]||(U[t]=new ol(l));break;case"dots":U[t]||(U[t]=new dl(l));break;case"dashed":U[t]||(U[t]=new cl(l));break;case"zigzag-line":U[t]||(U[t]=new gl(l));break;default:t="hachure",U[t]||(U[t]=new bt(l))}return U[t]}(e,fl).fillPolygons(h,e)}b(pe,"C");function ct(h){let e=Object.assign({},h);return e.randomizer=void 0,h.seed&&(e.seed=h.seed+1),e}b(ct,"z");function vt(h){return h.randomizer||(h.randomizer=new pl(h.seed||0)),h.randomizer.next()}b(vt,"W");function je(h,e,r,l=1){return r.roughness*l*(vt(r)*(e-h)+h)}b(je,"E");function _(h,e,r=1){return je(-h,h,e,r)}b(_,"G");function he(h,e,r,l,t,i=!1){let o=i?t.disableMultiStrokeFill:t.disableMultiStroke,a=Ke(h,e,r,l,t,!0,!1);if(o)return a;let d=Ke(h,e,r,l,t,!0,!0);return a.concat(d)}b(he,"$");function Ke(h,e,r,l,t,i,o){let a=Math.pow(h-r,2)+Math.pow(e-l,2),d=Math.sqrt(a),s=1;s=d<200?1:d>500?.4:-.0016668*d+1.233334;let n=t.maxRandomnessOffset||0;n*n*100>a&&(n=d/10);let c=n/2,p=.2+.2*vt(t),g=t.bowing*t.maxRandomnessOffset*(l-e)/200,y=t.bowing*t.maxRandomnessOffset*(h-r)/200;g=_(g,t,s),y=_(y,t,s);let f=[],m=b(()=>_(c,t,s),"M"),u=b(()=>_(n,t,s),"k"),x=t.preserveVertices;return i&&(o?f.push({op:"move",data:[h+(x?0:m()),e+(x?0:m())]}):f.push({op:"move",data:[h+(x?0:_(n,t,s)),e+(x?0:_(n,t,s))]})),o?f.push({op:"bcurveTo",data:[g+h+(r-h)*p+m(),y+e+(l-e)*p+m(),g+h+2*(r-h)*p+m(),y+e+2*(l-e)*p+m(),r+(x?0:m()),l+(x?0:m())]}):f.push({op:"bcurveTo",data:[g+h+(r-h)*p+u(),y+e+(l-e)*p+u(),g+h+2*(r-h)*p+u(),y+e+2*(l-e)*p+u(),r+(x?0:u()),l+(x?0:u())]}),f}b(Ke,"R");function Re(h,e,r){if(!h.length)return[];let l=[];l.push([h[0][0]+_(e,r),h[0][1]+_(e,r)]),l.push([h[0][0]+_(e,r),h[0][1]+_(e,r)]);for(let t=1;t<h.length;t++)l.push([h[t][0]+_(e,r),h[t][1]+_(e,r)]),t===h.length-1&&l.push([h[t][0]+_(e,r),h[t][1]+_(e,r)]);return We(l,null,r)}b(Re,"j");function We(h,e,r){let l=h.length,t=[];if(l>3){let i=[],o=1-r.curveTightness;t.push({op:"move",data:[h[1][0],h[1][1]]});for(let a=1;a+2<l;a++){let d=h[a];i[0]=[d[0],d[1]],i[1]=[d[0]+(o*h[a+1][0]-o*h[a-1][0])/6,d[1]+(o*h[a+1][1]-o*h[a-1][1])/6],i[2]=[h[a+1][0]+(o*h[a][0]-o*h[a+2][0])/6,h[a+1][1]+(o*h[a][1]-o*h[a+2][1])/6],i[3]=[h[a+1][0],h[a+1][1]],t.push({op:"bcurveTo",data:[i[1][0],i[1][1],i[2][0],i[2][1],i[3][0],i[3][1]]})}if(e&&e.length===2){let a=r.maxRandomnessOffset;t.push({op:"lineTo",data:[e[0]+_(a,r),e[1]+_(a,r)]})}}else l===3?(t.push({op:"move",data:[h[1][0],h[1][1]]}),t.push({op:"bcurveTo",data:[h[1][0],h[1][1],h[2][0],h[2][1],h[2][0],h[2][1]]})):l===2&&t.push(...Ke(h[0][0],h[0][1],h[1][0],h[1][1],r,!0,!0));return t}b(We,"q");function gt(h,e,r,l,t,i,o,a){let d=[],s=[];if(a.roughness===0){h/=4,s.push([e+l*Math.cos(-h),r+t*Math.sin(-h)]);for(let n=0;n<=2*Math.PI;n+=h){let c=[e+l*Math.cos(n),r+t*Math.sin(n)];d.push(c),s.push(c)}s.push([e+l*Math.cos(0),r+t*Math.sin(0)]),s.push([e+l*Math.cos(h),r+t*Math.sin(h)])}else{let n=_(.5,a)-Math.PI/2;s.push([_(i,a)+e+.9*l*Math.cos(n-h),_(i,a)+r+.9*t*Math.sin(n-h)]);let c=2*Math.PI+n-.01;for(let p=n;p<c;p+=h){let g=[_(i,a)+e+l*Math.cos(p),_(i,a)+r+t*Math.sin(p)];d.push(g),s.push(g)}s.push([_(i,a)+e+l*Math.cos(n+2*Math.PI+.5*o),_(i,a)+r+t*Math.sin(n+2*Math.PI+.5*o)]),s.push([_(i,a)+e+.98*l*Math.cos(n+o),_(i,a)+r+.98*t*Math.sin(n+o)]),s.push([_(i,a)+e+.9*l*Math.cos(n+.5*o),_(i,a)+r+.9*t*Math.sin(n+.5*o)])}return[s,d]}b(gt,"F");function pt(h,e,r,l,t,i,o,a,d){let s=i+_(.1,d),n=[];n.push([_(a,d)+e+.9*l*Math.cos(s-h),_(a,d)+r+.9*t*Math.sin(s-h)]);for(let c=s;c<=o;c+=h)n.push([_(a,d)+e+l*Math.cos(c),_(a,d)+r+t*Math.sin(c)]);return n.push([e+l*Math.cos(o),r+t*Math.sin(o)]),n.push([e+l*Math.cos(o),r+t*Math.sin(o)]),We(n,null,d)}b(pt,"V");function Et(h,e,r,l,t,i,o,a){let d=[],s=[a.maxRandomnessOffset||1,(a.maxRandomnessOffset||1)+.3],n=[0,0],c=a.disableMultiStroke?1:2,p=a.preserveVertices;for(let g=0;g<c;g++)g===0?d.push({op:"move",data:[o[0],o[1]]}):d.push({op:"move",data:[o[0]+(p?0:_(s[0],a)),o[1]+(p?0:_(s[0],a))]}),n=p?[t,i]:[t+_(s[g],a),i+_(s[g],a)],d.push({op:"bcurveTo",data:[h+_(s[g],a),e+_(s[g],a),r+_(s[g],a),l+_(s[g],a),n[0],n[1]]});return d}b(Et,"Z");function ue(h){return[...h]}b(ue,"Q");function yt(h,e=0){let r=h.length;if(r<3)throw new Error("A curve must have at least three points.");let l=[];if(r===3)l.push(ue(h[0]),ue(h[1]),ue(h[2]),ue(h[2]));else{let t=[];t.push(h[0],h[0]);for(let a=1;a<h.length;a++)t.push(h[a]),a===h.length-1&&t.push(h[a]);let i=[],o=1-e;l.push(ue(t[0]));for(let a=1;a+2<t.length;a++){let d=t[a];i[0]=[d[0],d[1]],i[1]=[d[0]+(o*t[a+1][0]-o*t[a-1][0])/6,d[1]+(o*t[a+1][1]-o*t[a-1][1])/6],i[2]=[t[a+1][0]+(o*t[a][0]-o*t[a+2][0])/6,t[a+1][1]+(o*t[a][1]-o*t[a+2][1])/6],i[3]=[t[a+1][0],t[a+1][1]],l.push(i[1],i[2],i[3])}}return l}b(yt,"H");function Ee(h,e){return Math.pow(h[0]-e[0],2)+Math.pow(h[1]-e[1],2)}b(Ee,"N");function jt(h,e,r){let l=Ee(e,r);if(l===0)return Ee(h,e);let t=((h[0]-e[0])*(r[0]-e[0])+(h[1]-e[1])*(r[1]-e[1]))/l;return t=Math.max(0,Math.min(1,t)),Ee(h,ce(e,r,t))}b(jt,"B");function ce(h,e,r){return[h[0]+(e[0]-h[0])*r,h[1]+(e[1]-h[1])*r]}b(ce,"J");function Ue(h,e,r,l){let t=l||[];if(function(a,d){let s=a[d+0],n=a[d+1],c=a[d+2],p=a[d+3],g=3*n[0]-2*s[0]-p[0];g*=g;let y=3*n[1]-2*s[1]-p[1];y*=y;let f=3*c[0]-2*p[0]-s[0];f*=f;let m=3*c[1]-2*p[1]-s[1];return m*=m,g<f&&(g=f),y<m&&(y=m),g+y}(h,e)<r){let a=h[e+0];t.length?(i=t[t.length-1],o=a,Math.sqrt(Ee(i,o))>1&&t.push(a)):t.push(a),t.push(h[e+3])}else{let a=h[e+0],d=h[e+1],s=h[e+2],n=h[e+3],c=ce(a,d,.5),p=ce(d,s,.5),g=ce(s,n,.5),y=ce(c,p,.5),f=ce(p,g,.5),m=ce(y,f,.5);Ue([a,c,y,m],0,r,t),Ue([m,f,g,n],0,r,t)}var i,o;return t}b(Ue,"K");function Wt(h,e){return He(h,0,h.length,e)}b(Wt,"U");function He(h,e,r,l,t){let i=t||[],o=h[e],a=h[r-1],d=0,s=1;for(let n=e+1;n<r-1;++n){let c=jt(h[n],o,a);c>d&&(d=c,s=n)}return Math.sqrt(d)>l?(He(h,e,s+1,l,i),He(h,s,r,l,i)):(i.length||i.push(o),i.push(a)),i}b(He,"X");function Je(h,e=.15,r){let l=[],t=(h.length-1)/3;for(let i=0;i<t;i++)Ue(h,3*i,e,l);return r&&r>0?He(l,0,l.length,r):l}b(Je,"Y");var te="none",ve,et=(ve=class{constructor(e){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=e||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(e){return e?Object.assign({},this.defaultOptions,e):this.defaultOptions}_d(e,r,l){return{shape:e,sets:r||[],options:l||this.defaultOptions}}line(e,r,l,t,i){let o=this._o(i);return this._d("line",[Mt(e,r,l,t,o)],o)}rectangle(e,r,l,t,i){let o=this._o(i),a=[],d=Ot(e,r,l,t,o);if(o.fill){let s=[[e,r],[e+l,r],[e+l,r+t],[e,r+t]];o.fillStyle==="solid"?a.push(Xe([s],o)):a.push(pe([s],o))}return o.stroke!==te&&a.push(d),this._d("rectangle",a,o)}ellipse(e,r,l,t,i){let o=this._o(i),a=[],d=$t(l,t,o),s=Ye(e,r,o,d);if(o.fill)if(o.fillStyle==="solid"){let n=Ye(e,r,o,d).opset;n.type="fillPath",a.push(n)}else a.push(pe([s.estimatedPoints],o));return o.stroke!==te&&a.push(s.opset),this._d("ellipse",a,o)}circle(e,r,l,t){let i=this.ellipse(e,r,l,l,t);return i.shape="circle",i}linearPath(e,r){let l=this._o(r);return this._d("linearPath",[Oe(e,!1,l)],l)}arc(e,r,l,t,i,o,a=!1,d){let s=this._o(d),n=[],c=ot(e,r,l,t,i,o,a,!0,s);if(a&&s.fill)if(s.fillStyle==="solid"){let p=Object.assign({},s);p.disableMultiStroke=!0;let g=ot(e,r,l,t,i,o,!0,!1,p);g.type="fillPath",n.push(g)}else n.push(function(p,g,y,f,m,u,x){let w=p,M=g,S=Math.abs(y/2),k=Math.abs(f/2);S+=_(.01*S,x),k+=_(.01*k,x);let $=m,D=u;for(;$<0;)$+=2*Math.PI,D+=2*Math.PI;D-$>2*Math.PI&&($=0,D=2*Math.PI);let N=(D-$)/x.curveStepCount,B=[];for(let v=$;v<=D;v+=N)B.push([w+S*Math.cos(v),M+k*Math.sin(v)]);return B.push([w+S*Math.cos(D),M+k*Math.sin(D)]),B.push([w,M]),pe([B],x)}(e,r,l,t,i,o,s));return s.stroke!==te&&n.push(c),this._d("arc",n,s)}curve(e,r){let l=this._o(r),t=[],i=ht(e,l);if(l.fill&&l.fill!==te)if(l.fillStyle==="solid"){let o=ht(e,Object.assign(Object.assign({},l),{disableMultiStroke:!0,roughness:l.roughness?l.roughness+l.fillShapeRoughnessGain:0}));t.push({type:"fillPath",ops:this._mergedShape(o.ops)})}else{let o=[],a=e;if(a.length){let d=typeof a[0][0]=="number"?[a]:a;for(let s of d)s.length<3?o.push(...s):s.length===3?o.push(...Je(yt([s[0],s[0],s[1],s[2]]),10,(1+l.roughness)/2)):o.push(...Je(yt(s),10,(1+l.roughness)/2))}o.length&&t.push(pe([o],l))}return l.stroke!==te&&t.push(i),this._d("curve",t,l)}polygon(e,r){let l=this._o(r),t=[],i=Oe(e,!0,l);return l.fill&&(l.fillStyle==="solid"?t.push(Xe([e],l)):t.push(pe([e],l))),l.stroke!==te&&t.push(i),this._d("polygon",t,l)}path(e,r){let l=this._o(r),t=[];if(!e)return this._d("path",t,l);e=(e||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");let i=l.fill&&l.fill!=="transparent"&&l.fill!==te,o=l.stroke!==te,a=!!(l.simplification&&l.simplification<1),d=function(n,c,p){let g=St(wt(lt(n))),y=[],f=[],m=[0,0],u=[],x=b(()=>{u.length>=4&&f.push(...Je(u,c)),u=[]},"i"),w=b(()=>{x(),f.length&&(y.push(f),f=[])},"c");for(let{key:S,data:k}of g)switch(S){case"M":w(),m=[k[0],k[1]],f.push(m);break;case"L":x(),f.push([k[0],k[1]]);break;case"C":if(!u.length){let $=f.length?f[f.length-1]:m;u.push([$[0],$[1]])}u.push([k[0],k[1]]),u.push([k[2],k[3]]),u.push([k[4],k[5]]);break;case"Z":x(),f.push([m[0],m[1]])}if(w(),!p)return y;let M=[];for(let S of y){let k=Wt(S,p);k.length&&M.push(k)}return M}(e,1,a?4-4*(l.simplification||1):(1+l.roughness)/2),s=dt(e,l);if(i)if(l.fillStyle==="solid")if(d.length===1){let n=dt(e,Object.assign(Object.assign({},l),{disableMultiStroke:!0,roughness:l.roughness?l.roughness+l.fillShapeRoughnessGain:0}));t.push({type:"fillPath",ops:this._mergedShape(n.ops)})}else t.push(Xe(d,l));else t.push(pe(d,l));return o&&(a?d.forEach(n=>{t.push(Oe(n,!1,l))}):t.push(s)),this._d("path",t,l)}opsToPath(e,r){let l="";for(let t of e.ops){let i=typeof r=="number"&&r>=0?t.data.map(o=>+o.toFixed(r)):t.data;switch(t.op){case"move":l+=`M${i[0]} ${i[1]} `;break;case"bcurveTo":l+=`C${i[0]} ${i[1]}, ${i[2]} ${i[3]}, ${i[4]} ${i[5]} `;break;case"lineTo":l+=`L${i[0]} ${i[1]} `}}return l.trim()}toPaths(e){let r=e.sets||[],l=e.options||this.defaultOptions,t=[];for(let i of r){let o=null;switch(i.type){case"path":o={d:this.opsToPath(i),stroke:l.stroke,strokeWidth:l.strokeWidth,fill:te};break;case"fillPath":o={d:this.opsToPath(i),stroke:te,strokeWidth:0,fill:l.fill||te};break;case"fillSketch":o=this.fillSketch(i,l)}o&&t.push(o)}return t}fillSketch(e,r){let l=r.fillWeight;return l<0&&(l=r.strokeWidth/2),{d:this.opsToPath(e),stroke:r.fill||te,strokeWidth:l,fill:te}}_mergedShape(e){return e.filter((r,l)=>l===0||r.op!=="move")}},b(ve,"et"),ve),De,ul=(De=class{constructor(e,r){this.canvas=e,this.ctx=this.canvas.getContext("2d"),this.gen=new et(r)}draw(e){let r=e.sets||[],l=e.options||this.getDefaultOptions(),t=this.ctx,i=e.options.fixedDecimalPlaceDigits;for(let o of r)switch(o.type){case"path":t.save(),t.strokeStyle=l.stroke==="none"?"transparent":l.stroke,t.lineWidth=l.strokeWidth,l.strokeLineDash&&t.setLineDash(l.strokeLineDash),l.strokeLineDashOffset&&(t.lineDashOffset=l.strokeLineDashOffset),this._drawToContext(t,o,i),t.restore();break;case"fillPath":{t.save(),t.fillStyle=l.fill||"";let a=e.shape==="curve"||e.shape==="polygon"||e.shape==="path"?"evenodd":"nonzero";this._drawToContext(t,o,i,a),t.restore();break}case"fillSketch":this.fillSketch(t,o,l)}}fillSketch(e,r,l){let t=l.fillWeight;t<0&&(t=l.strokeWidth/2),e.save(),l.fillLineDash&&e.setLineDash(l.fillLineDash),l.fillLineDashOffset&&(e.lineDashOffset=l.fillLineDashOffset),e.strokeStyle=l.fill||"",e.lineWidth=t,this._drawToContext(e,r,l.fixedDecimalPlaceDigits),e.restore()}_drawToContext(e,r,l,t="nonzero"){e.beginPath();for(let i of r.ops){let o=typeof l=="number"&&l>=0?i.data.map(a=>+a.toFixed(l)):i.data;switch(i.op){case"move":e.moveTo(o[0],o[1]);break;case"bcurveTo":e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"lineTo":e.lineTo(o[0],o[1])}}r.type==="fillPath"?e.fill(t):e.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(e,r,l,t,i){let o=this.gen.line(e,r,l,t,i);return this.draw(o),o}rectangle(e,r,l,t,i){let o=this.gen.rectangle(e,r,l,t,i);return this.draw(o),o}ellipse(e,r,l,t,i){let o=this.gen.ellipse(e,r,l,t,i);return this.draw(o),o}circle(e,r,l,t){let i=this.gen.circle(e,r,l,t);return this.draw(i),i}linearPath(e,r){let l=this.gen.linearPath(e,r);return this.draw(l),l}polygon(e,r){let l=this.gen.polygon(e,r);return this.draw(l),l}arc(e,r,l,t,i,o,a=!1,d){let s=this.gen.arc(e,r,l,t,i,o,a,d);return this.draw(s),s}curve(e,r){let l=this.gen.curve(e,r);return this.draw(l),l}path(e,r){let l=this.gen.path(e,r);return this.draw(l),l}},b(De,"st"),De),Ve="http://www.w3.org/2000/svg",Pe,ml=(Pe=class{constructor(e,r){this.svg=e,this.gen=new et(r)}draw(e){let r=e.sets||[],l=e.options||this.getDefaultOptions(),t=this.svg.ownerDocument||window.document,i=t.createElementNS(Ve,"g"),o=e.options.fixedDecimalPlaceDigits;for(let a of r){let d=null;switch(a.type){case"path":d=t.createElementNS(Ve,"path"),d.setAttribute("d",this.opsToPath(a,o)),d.setAttribute("stroke",l.stroke),d.setAttribute("stroke-width",l.strokeWidth+""),d.setAttribute("fill","none"),l.strokeLineDash&&d.setAttribute("stroke-dasharray",l.strokeLineDash.join(" ").trim()),l.strokeLineDashOffset&&d.setAttribute("stroke-dashoffset",`${l.strokeLineDashOffset}`);break;case"fillPath":d=t.createElementNS(Ve,"path"),d.setAttribute("d",this.opsToPath(a,o)),d.setAttribute("stroke","none"),d.setAttribute("stroke-width","0"),d.setAttribute("fill",l.fill||""),e.shape!=="curve"&&e.shape!=="polygon"||d.setAttribute("fill-rule","evenodd");break;case"fillSketch":d=this.fillSketch(t,a,l)}d&&i.appendChild(d)}return i}fillSketch(e,r,l){let t=l.fillWeight;t<0&&(t=l.strokeWidth/2);let i=e.createElementNS(Ve,"path");return i.setAttribute("d",this.opsToPath(r,l.fixedDecimalPlaceDigits)),i.setAttribute("stroke",l.fill||""),i.setAttribute("stroke-width",t+""),i.setAttribute("fill","none"),l.fillLineDash&&i.setAttribute("stroke-dasharray",l.fillLineDash.join(" ").trim()),l.fillLineDashOffset&&i.setAttribute("stroke-dashoffset",`${l.fillLineDashOffset}`),i}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(e,r){return this.gen.opsToPath(e,r)}line(e,r,l,t,i){let o=this.gen.line(e,r,l,t,i);return this.draw(o)}rectangle(e,r,l,t,i){let o=this.gen.rectangle(e,r,l,t,i);return this.draw(o)}ellipse(e,r,l,t,i){let o=this.gen.ellipse(e,r,l,t,i);return this.draw(o)}circle(e,r,l,t){let i=this.gen.circle(e,r,l,t);return this.draw(i)}linearPath(e,r){let l=this.gen.linearPath(e,r);return this.draw(l)}polygon(e,r){let l=this.gen.polygon(e,r);return this.draw(l)}arc(e,r,l,t,i,o,a=!1,d){let s=this.gen.arc(e,r,l,t,i,o,a,d);return this.draw(s)}curve(e,r){let l=this.gen.curve(e,r);return this.draw(l)}path(e,r){let l=this.gen.path(e,r);return this.draw(l)}},b(Pe,"ot"),Pe),E={canvas:b((h,e)=>new ul(h,e),"canvas"),svg:b((h,e)=>new ml(h,e),"svg"),generator:b(h=>new et(h),"generator"),newSeed:b(()=>et.newSeed(),"newSeed")},xl=b((h,e)=>{var r=h.x,l=h.y,t=e.x-r,i=e.y-l,o=h.width/2,a=h.height/2,d,s;return Math.abs(i)*o>Math.abs(t)*a?(i<0&&(a=-a),d=i===0?0:a*t/i,s=a):(t<0&&(o=-o),d=o,s=t===0?0:o*i/t),{x:r+d,y:l+s}},"intersectRect"),Ce=xl;function Ht(h,e){e&&h.attr("style",e)}b(Ht,"applyStyle");async function _t(h){let e=J(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),r=e.append("xhtml:div"),l=h.label;h.label&&Nt(h.label)&&(l=await il(h.label.replace(nl.lineBreakRegex,`
`),Q()));let t=h.isNode?"nodeLabel":"edgeLabel";return r.html('<span class="'+t+'" '+(h.labelStyle?'style="'+h.labelStyle+'"':"")+">"+l+"</span>"),Ht(r,h.labelStyle),r.style("display","inline-block"),r.style("padding-right","1px"),r.style("white-space","nowrap"),r.attr("xmlns","http://www.w3.org/1999/xhtml"),e.node()}b(_t,"addHtmlLabel");var bl=b(async(h,e,r,l)=>{let t=h||"";if(typeof t=="object"&&(t=t[0]),Y(Q().flowchart.htmlLabels)){t=t.replace(/\\n|\n/g,"<br />"),G.info("vertexText"+t);let i={isNode:l,label:_e(t).replace(/fa[blrs]?:fa-[\w-]+/g,o=>`<i class='${o.replace(":"," ")}'></i>`),labelStyle:e&&e.replace("fill:","color:")};return await _t(i)}else{let i=document.createElementNS("http://www.w3.org/2000/svg","text");i.setAttribute("style",e.replace("color:","fill:"));let o=[];typeof t=="string"?o=t.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(t)?o=t:o=[];for(let a of o){let d=document.createElementNS("http://www.w3.org/2000/svg","tspan");d.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),d.setAttribute("dy","1em"),d.setAttribute("x","0"),r?d.setAttribute("class","title-row"):d.setAttribute("class","row"),d.textContent=a.trim(),i.appendChild(d)}return i}},"createLabel"),ft=bl,oe=b((h,e,r,l,t)=>["M",h+t,e,"H",h+r-t,"A",t,t,0,0,1,h+r,e+t,"V",e+l-t,"A",t,t,0,0,1,h+r-t,e+l,"H",h+t,"A",t,t,0,0,1,h,e+l-t,"V",e+t,"A",t,t,0,0,1,h+t,e,"Z"].join(" "),"createRoundedRectPathD"),wl=b(h=>{let{handDrawnSeed:e}=Q();return{fill:h,hachureAngle:120,hachureGap:4,fillWeight:2,roughness:.7,stroke:h,seed:e}},"solidStateFill"),Ae=b(h=>{let e=Sl([...h.cssCompiledStyles||[],...h.cssStyles||[]]);return{stylesMap:e,stylesArray:[...e]}},"compileStyles"),Sl=b(h=>{let e=new Map;return h.forEach(r=>{let[l,t]=r.split(":");e.set(l.trim(),t==null?void 0:t.trim())}),e},"styles2Map"),kl=b(h=>h==="color"||h==="font-size"||h==="font-family"||h==="font-weight"||h==="font-style"||h==="text-decoration"||h==="text-align"||h==="text-transform"||h==="line-height"||h==="letter-spacing"||h==="word-spacing"||h==="text-shadow"||h==="text-overflow"||h==="white-space"||h==="word-wrap"||h==="word-break"||h==="overflow-wrap"||h==="hyphens","isLabelStyle"),W=b(h=>{let{stylesArray:e}=Ae(h),r=[],l=[],t=[],i=[];return e.forEach(o=>{let a=o[0];kl(a)?r.push(o.join(":")+" !important"):(l.push(o.join(":")+" !important"),a.includes("stroke")&&t.push(o.join(":")+" !important"),a==="fill"&&i.push(o.join(":")+" !important"))}),{labelStyles:r.join(";"),nodeStyles:l.join(";"),stylesArray:e,borderStyles:t,backgroundStyles:i}},"styles2String"),O=b((h,e)=>{var a;let{themeVariables:r,handDrawnSeed:l}=Q(),{nodeBorder:t,mainBkg:i}=r,{stylesMap:o}=Ae(h);return Object.assign({roughness:.7,fill:o.get("fill")||i,fillStyle:"hachure",fillWeight:4,hachureGap:5.2,stroke:o.get("stroke")||t,seed:l,strokeWidth:((a=o.get("stroke-width"))==null?void 0:a.replace("px",""))||1.3,fillLineDash:[0,0]},e)},"userNodeOverrides"),qt=b(async(h,e)=>{G.info("Creating subgraph rect for ",e.id,e);let r=Q(),{themeVariables:l,handDrawnSeed:t}=r,{clusterBkg:i,clusterBorder:o}=l,{labelStyles:a,nodeStyles:d,borderStyles:s,backgroundStyles:n}=W(e),c=h.insert("g").attr("class","cluster "+e.cssClasses).attr("id",e.id).attr("data-look",e.look),p=Y(r.flowchart.htmlLabels),g=c.insert("g").attr("class","cluster-label "),y=await ye(g,e.label,{style:e.labelStyle,useHtmlLabels:p,isNode:!0}),f=y.getBBox();if(Y(r.flowchart.htmlLabels)){let $=y.children[0],D=J(y);f=$.getBoundingClientRect(),D.attr("width",f.width),D.attr("height",f.height)}let m=e.width<=f.width+e.padding?f.width+e.padding:e.width;e.width<=f.width+e.padding?e.diff=(m-e.width)/2-e.padding:e.diff=-e.padding;let u=e.height,x=e.x-m/2,w=e.y-u/2;G.trace("Data ",e,JSON.stringify(e));let M;if(e.look==="handDrawn"){let $=E.svg(c),D=O(e,{roughness:.7,fill:i,stroke:o,fillWeight:3,seed:t}),N=$.path(oe(x,w,m,u,0),D);M=c.insert(()=>(G.debug("Rough node insert CXC",N),N),":first-child"),M.select("path:nth-child(2)").attr("style",s.join(";")),M.select("path").attr("style",n.join(";").replace("fill","stroke"))}else M=c.insert("rect",":first-child"),M.attr("style",d).attr("rx",e.rx).attr("ry",e.ry).attr("x",x).attr("y",w).attr("width",m).attr("height",u);let{subGraphTitleTopMargin:S}=At(r);if(g.attr("transform",`translate(${e.x-f.width/2}, ${e.y-e.height/2+S})`),a){let $=g.select("span");$&&$.attr("style",a)}let k=M.node().getBBox();return e.offsetX=0,e.width=k.width,e.height=k.height,e.offsetY=f.height-e.padding/2,e.intersect=function($){return Ce(e,$)},{cluster:c,labelBBox:f}},"rect"),Ml=b((h,e)=>{let r=h.insert("g").attr("class","note-cluster").attr("id",e.id),l=r.insert("rect",":first-child"),t=0*e.padding,i=t/2;l.attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-e.width/2-i).attr("y",e.y-e.height/2-i).attr("width",e.width+t).attr("height",e.height+t).attr("fill","none");let o=l.node().getBBox();return e.width=o.width,e.height=o.height,e.intersect=function(a){return Ce(e,a)},{cluster:r,labelBBox:{width:0,height:0}}},"noteGroup"),$l=b(async(h,e)=>{let r=Q(),{themeVariables:l,handDrawnSeed:t}=r,{altBackground:i,compositeBackground:o,compositeTitleBackground:a,nodeBorder:d}=l,s=h.insert("g").attr("class",e.cssClasses).attr("id",e.id).attr("data-id",e.id).attr("data-look",e.look),n=s.insert("g",":first-child"),c=s.insert("g").attr("class","cluster-label"),p=s.append("rect"),g=c.node().appendChild(await ft(e.label,e.labelStyle,void 0,!0)),y=g.getBBox();if(Y(r.flowchart.htmlLabels)){let N=g.children[0],B=J(g);y=N.getBoundingClientRect(),B.attr("width",y.width),B.attr("height",y.height)}let f=0*e.padding,m=f/2,u=(e.width<=y.width+e.padding?y.width+e.padding:e.width)+f;e.width<=y.width+e.padding?e.diff=(u-e.width)/2-e.padding:e.diff=-e.padding;let x=e.height+f,w=e.height+f-y.height-6,M=e.x-u/2,S=e.y-x/2;e.width=u;let k=e.y-e.height/2-m+y.height+2,$;if(e.look==="handDrawn"){let N=e.cssClasses.includes("statediagram-cluster-alt"),B=E.svg(s),v=e.rx||e.ry?B.path(oe(M,S,u,x,10),{roughness:.7,fill:a,fillStyle:"solid",stroke:d,seed:t}):B.rectangle(M,S,u,x,{seed:t});$=s.insert(()=>v,":first-child");let H=B.rectangle(M,k,u,w,{fill:N?i:o,fillStyle:N?"hachure":"solid",stroke:d,seed:t});$=s.insert(()=>v,":first-child"),p=s.insert(()=>H)}else $=n.insert("rect",":first-child"),$.attr("class","outer").attr("x",M).attr("y",S).attr("width",u).attr("height",x).attr("data-look",e.look),p.attr("class","inner").attr("x",M).attr("y",k).attr("width",u).attr("height",w);c.attr("transform",`translate(${e.x-y.width/2}, ${S+1-(Y(r.flowchart.htmlLabels)?0:3)})`);let D=$.node().getBBox();return e.height=D.height,e.offsetX=0,e.offsetY=y.height-e.padding/2,e.labelBBox=y,e.intersect=function(N){return Ce(e,N)},{cluster:s,labelBBox:y}},"roundedWithTitle"),vl=b(async(h,e)=>{G.info("Creating subgraph rect for ",e.id,e);let r=Q(),{themeVariables:l,handDrawnSeed:t}=r,{clusterBkg:i,clusterBorder:o}=l,{labelStyles:a,nodeStyles:d,borderStyles:s,backgroundStyles:n}=W(e),c=h.insert("g").attr("class","cluster "+e.cssClasses).attr("id",e.id).attr("data-look",e.look),p=Y(r.flowchart.htmlLabels),g=c.insert("g").attr("class","cluster-label "),y=await ye(g,e.label,{style:e.labelStyle,useHtmlLabels:p,isNode:!0,width:e.width}),f=y.getBBox();if(Y(r.flowchart.htmlLabels)){let $=y.children[0],D=J(y);f=$.getBoundingClientRect(),D.attr("width",f.width),D.attr("height",f.height)}let m=e.width<=f.width+e.padding?f.width+e.padding:e.width;e.width<=f.width+e.padding?e.diff=(m-e.width)/2-e.padding:e.diff=-e.padding;let u=e.height,x=e.x-m/2,w=e.y-u/2;G.trace("Data ",e,JSON.stringify(e));let M;if(e.look==="handDrawn"){let $=E.svg(c),D=O(e,{roughness:.7,fill:i,stroke:o,fillWeight:4,seed:t}),N=$.path(oe(x,w,m,u,e.rx),D);M=c.insert(()=>(G.debug("Rough node insert CXC",N),N),":first-child"),M.select("path:nth-child(2)").attr("style",s.join(";")),M.select("path").attr("style",n.join(";").replace("fill","stroke"))}else M=c.insert("rect",":first-child"),M.attr("style",d).attr("rx",e.rx).attr("ry",e.ry).attr("x",x).attr("y",w).attr("width",m).attr("height",u);let{subGraphTitleTopMargin:S}=At(r);if(g.attr("transform",`translate(${e.x-f.width/2}, ${e.y-e.height/2+S})`),a){let $=g.select("span");$&&$.attr("style",a)}let k=M.node().getBBox();return e.offsetX=0,e.width=k.width,e.height=k.height,e.offsetY=f.height-e.padding/2,e.intersect=function($){return Ce(e,$)},{cluster:c,labelBBox:f}},"kanbanSection"),Dl=b((h,e)=>{let r=Q(),{themeVariables:l,handDrawnSeed:t}=r,{nodeBorder:i}=l,o=h.insert("g").attr("class",e.cssClasses).attr("id",e.id).attr("data-look",e.look),a=o.insert("g",":first-child"),d=0*e.padding,s=e.width+d;e.diff=-e.padding;let n=e.height+d,c=e.x-s/2,p=e.y-n/2;e.width=s;let g;if(e.look==="handDrawn"){let f=E.svg(o).rectangle(c,p,s,n,{fill:"lightgrey",roughness:.5,strokeLineDash:[5],stroke:i,seed:t});g=o.insert(()=>f,":first-child")}else g=a.insert("rect",":first-child"),g.attr("class","divider").attr("x",c).attr("y",p).attr("width",s).attr("height",n).attr("data-look",e.look);let y=g.node().getBBox();return e.height=y.height,e.offsetX=0,e.offsetY=0,e.intersect=function(f){return Ce(e,f)},{cluster:o,labelBBox:{}}},"divider"),Pl=qt,Bl={rect:qt,squareRect:Pl,roundedWithTitle:$l,noteGroup:Ml,divider:Dl,kanbanSection:vl},zt=new Map,ts=b(async(h,e)=>{let r=e.shape||"rect",l=await Bl[r](h,e);return zt.set(e.id,l),l},"insertCluster"),as=b(()=>{zt=new Map},"clear");function Ft(h,e){return h.intersect(e)}b(Ft,"intersectNode");var Cl=Ft;function Gt(h,e,r,l){var t=h.x,i=h.y,o=t-l.x,a=i-l.y,d=Math.sqrt(e*e*a*a+r*r*o*o),s=Math.abs(e*r*o/d);l.x<t&&(s=-s);var n=Math.abs(e*r*a/d);return l.y<i&&(n=-n),{x:t+s,y:i+n}}b(Gt,"intersectEllipse");var Vt=Gt;function Qt(h,e,r){return Vt(h,e,e,r)}b(Qt,"intersectCircle");var Al=Qt;function Zt(h,e,r,l){var t,i,o,a,d,s,n,c,p,g,y,f,m,u,x;if(t=e.y-h.y,o=h.x-e.x,d=e.x*h.y-h.x*e.y,p=t*r.x+o*r.y+d,g=t*l.x+o*l.y+d,!(p!==0&&g!==0&&ut(p,g))&&(i=l.y-r.y,a=r.x-l.x,s=l.x*r.y-r.x*l.y,n=i*h.x+a*h.y+s,c=i*e.x+a*e.y+s,!(n!==0&&c!==0&&ut(n,c))&&(y=t*a-i*o,y!==0)))return f=Math.abs(y/2),m=o*s-a*d,u=m<0?(m-f)/y:(m+f)/y,m=i*d-t*s,x=m<0?(m-f)/y:(m+f)/y,{x:u,y:x}}b(Zt,"intersectLine");function ut(h,e){return h*e>0}b(ut,"sameSign");var Ll=Zt;function Xt(h,e,r){let l=h.x,t=h.y,i=[],o=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY;typeof e.forEach=="function"?e.forEach(function(n){o=Math.min(o,n.x),a=Math.min(a,n.y)}):(o=Math.min(o,e.x),a=Math.min(a,e.y));let d=l-h.width/2-o,s=t-h.height/2-a;for(let n=0;n<e.length;n++){let c=e[n],p=e[n<e.length-1?n+1:0],g=Ll(h,r,{x:d+c.x,y:s+c.y},{x:d+p.x,y:s+p.y});g&&i.push(g)}return i.length?(i.length>1&&i.sort(function(n,c){let p=n.x-r.x,g=n.y-r.y,y=Math.sqrt(p*p+g*g),f=c.x-r.x,m=c.y-r.y,u=Math.sqrt(f*f+m*m);return y<u?-1:y===u?0:1}),i[0]):h}b(Xt,"intersectPolygon");var Nl=Xt,L={node:Cl,circle:Al,ellipse:Vt,polygon:Nl,rect:Ce};function Jt(h,e){let{labelStyles:r}=W(e);e.labelStyle=r;let l=q(e),t=l;l||(t="anchor");let i=h.insert("g").attr("class",t).attr("id",e.domId||e.id),o=1,{cssStyles:a}=e,d=E.svg(i),s=O(e,{fill:"black",stroke:"none",fillStyle:"solid"});e.look!=="handDrawn"&&(s.roughness=0);let n=d.circle(0,0,o*2,s),c=i.insert(()=>n,":first-child");return c.attr("class","anchor").attr("style",ee(a)),j(e,c),e.intersect=function(p){return G.info("Circle intersect",e,o,p),L.circle(e,o,p)},i}b(Jt,"anchor");function mt(h,e,r,l,t,i,o){let a=(h+r)/2,d=(e+l)/2,s=Math.atan2(l-e,r-h),n=(r-h)/2,c=(l-e)/2,p=n/t,g=c/i,y=Math.sqrt(p**2+g**2);if(y>1)throw new Error("The given radii are too small to create an arc between the points.");let f=Math.sqrt(1-y**2),m=a+f*i*Math.sin(s)*(o?-1:1),u=d-f*t*Math.cos(s)*(o?-1:1),x=Math.atan2((e-u)/i,(h-m)/t),w=Math.atan2((l-u)/i,(r-m)/t)-x;o&&w<0&&(w+=2*Math.PI),!o&&w>0&&(w-=2*Math.PI);let M=[];for(let S=0;S<20;S++){let k=S/19,$=x+k*w,D=m+t*Math.cos($),N=u+i*Math.sin($);M.push({x:D,y:N})}return M}b(mt,"generateArcPoints");async function Yt(h,e){let{labelStyles:r,nodeStyles:l}=W(e);e.labelStyle=r;let{shapeSvg:t,bbox:i}=await z(h,e,q(e)),o=i.width+e.padding+20,a=i.height+e.padding,d=a/2,s=d/(2.5+a/50),{cssStyles:n}=e,c=[{x:o/2,y:-a/2},{x:-o/2,y:-a/2},...mt(-o/2,-a/2,-o/2,a/2,s,d,!1),{x:o/2,y:a/2},...mt(o/2,a/2,o/2,-a/2,s,d,!0)],p=E.svg(t),g=O(e,{});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");let y=F(c),f=p.path(y,g),m=t.insert(()=>f,":first-child");return m.attr("class","basic label-container"),n&&e.look!=="handDrawn"&&m.selectAll("path").attr("style",n),l&&e.look!=="handDrawn"&&m.selectAll("path").attr("style",l),m.attr("transform",`translate(${s/2}, 0)`),j(e,m),e.intersect=function(u){return L.polygon(e,c,u)},t}b(Yt,"bowTieRect");function de(h,e,r,l){return h.insert("polygon",":first-child").attr("points",l.map(function(t){return t.x+","+t.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-e/2+","+r/2+")")}b(de,"insertPolygonShape");async function Kt(h,e){let{labelStyles:r,nodeStyles:l}=W(e);e.labelStyle=r;let{shapeSvg:t,bbox:i}=await z(h,e,q(e)),o=i.height+e.padding,a=12,d=i.width+e.padding+a,s=0,n=d,c=-o,p=0,g=[{x:s+a,y:c},{x:n,y:c},{x:n,y:p},{x:s,y:p},{x:s,y:c+a},{x:s+a,y:c}],y,{cssStyles:f}=e;if(e.look==="handDrawn"){let m=E.svg(t),u=O(e,{}),x=F(g),w=m.path(x,u);y=t.insert(()=>w,":first-child").attr("transform",`translate(${-d/2}, ${o/2})`),f&&y.attr("style",f)}else y=de(t,d,o,g);return l&&y.attr("style",l),j(e,y),e.intersect=function(m){return L.polygon(e,g,m)},t}b(Kt,"card");function Ut(h,e){let{nodeStyles:r}=W(e);e.label="";let l=h.insert("g").attr("class",q(e)).attr("id",e.domId??e.id),{cssStyles:t}=e,i=Math.max(28,e.width??0),o=[{x:0,y:i/2},{x:i/2,y:0},{x:0,y:-i/2},{x:-i/2,y:0}],a=E.svg(l),d=O(e,{});e.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");let s=F(o),n=a.path(s,d),c=l.insert(()=>n,":first-child");return t&&e.look!=="handDrawn"&&c.selectAll("path").attr("style",t),r&&e.look!=="handDrawn"&&c.selectAll("path").attr("style",r),e.width=28,e.height=28,e.intersect=function(p){return L.polygon(e,o,p)},l}b(Ut,"choice");async function ea(h,e){let{labelStyles:r,nodeStyles:l}=W(e);e.labelStyle=r;let{shapeSvg:t,bbox:i,halfPadding:o}=await z(h,e,q(e)),a=i.width/2+o,d,{cssStyles:s}=e;if(e.look==="handDrawn"){let n=E.svg(t),c=O(e,{}),p=n.circle(0,0,a*2,c);d=t.insert(()=>p,":first-child"),d.attr("class","basic label-container").attr("style",ee(s))}else d=t.insert("circle",":first-child").attr("class","basic label-container").attr("style",l).attr("r",a).attr("cx",0).attr("cy",0);return j(e,d),e.intersect=function(n){return G.info("Circle intersect",e,a,n),L.circle(e,a,n)},t}b(ea,"circle");function ta(h){let e=Math.cos(Math.PI/4),r=Math.sin(Math.PI/4),l=h*2,t={x:l/2*e,y:l/2*r},i={x:-(l/2)*e,y:l/2*r},o={x:-(l/2)*e,y:-(l/2)*r},a={x:l/2*e,y:-(l/2)*r};return`M ${i.x},${i.y} L ${a.x},${a.y}
                   M ${t.x},${t.y} L ${o.x},${o.y}`}b(ta,"createLine");function aa(h,e){let{labelStyles:r,nodeStyles:l}=W(e);e.labelStyle=r,e.label="";let t=h.insert("g").attr("class",q(e)).attr("id",e.domId??e.id),i=Math.max(30,(e==null?void 0:e.width)??0),{cssStyles:o}=e,a=E.svg(t),d=O(e,{});e.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");let s=a.circle(0,0,i*2,d),n=ta(i),c=a.path(n,d),p=t.insert(()=>s,":first-child");return p.insert(()=>c),o&&e.look!=="handDrawn"&&p.selectAll("path").attr("style",o),l&&e.look!=="handDrawn"&&p.selectAll("path").attr("style",l),j(e,p),e.intersect=function(g){return G.info("crossedCircle intersect",e,{radius:i,point:g}),L.circle(e,i,g)},t}b(aa,"crossedCircle");function ie(h,e,r,l=100,t=0,i=180){let o=[],a=t*Math.PI/180,d=(i*Math.PI/180-a)/(l-1);for(let s=0;s<l;s++){let n=a+s*d,c=h+r*Math.cos(n),p=e+r*Math.sin(n);o.push({x:-c,y:-p})}return o}b(ie,"generateCirclePoints");async function la(h,e){let{labelStyles:r,nodeStyles:l}=W(e);e.labelStyle=r;let{shapeSvg:t,bbox:i,label:o}=await z(h,e,q(e)),a=i.width+(e.padding??0),d=i.height+(e.padding??0),s=Math.max(5,d*.1),{cssStyles:n}=e,c=[...ie(a/2,-d/2,s,30,-90,0),{x:-a/2-s,y:s},...ie(a/2+s*2,-s,s,20,-180,-270),...ie(a/2+s*2,s,s,20,-90,-180),{x:-a/2-s,y:-d/2},...ie(a/2,d/2,s,20,0,90)],p=[{x:a/2,y:-d/2-s},{x:-a/2,y:-d/2-s},...ie(a/2,-d/2,s,20,-90,0),{x:-a/2-s,y:-s},...ie(a/2+a*.1,-s,s,20,-180,-270),...ie(a/2+a*.1,s,s,20,-90,-180),{x:-a/2-s,y:d/2},...ie(a/2,d/2,s,20,0,90),{x:-a/2,y:d/2+s},{x:a/2,y:d/2+s}],g=E.svg(t),y=O(e,{fill:"none"});e.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");let f=F(c).replace("Z",""),m=g.path(f,y),u=F(p),x=g.path(u,{...y}),w=t.insert("g",":first-child");return w.insert(()=>x,":first-child").attr("stroke-opacity",0),w.insert(()=>m,":first-child"),w.attr("class","text"),n&&e.look!=="handDrawn"&&w.selectAll("path").attr("style",n),l&&e.look!=="handDrawn"&&w.selectAll("path").attr("style",l),w.attr("transform",`translate(${s}, 0)`),o.attr("transform",`translate(${-a/2+s-(i.x-(i.left??0))},${-d/2+(e.padding??0)/2-(i.y-(i.top??0))})`),j(e,w),e.intersect=function(M){return L.polygon(e,p,M)},t}b(la,"curlyBraceLeft");function ne(h,e,r,l=100,t=0,i=180){let o=[],a=t*Math.PI/180,d=(i*Math.PI/180-a)/(l-1);for(let s=0;s<l;s++){let n=a+s*d,c=h+r*Math.cos(n),p=e+r*Math.sin(n);o.push({x:c,y:p})}return o}b(ne,"generateCirclePoints");async function sa(h,e){let{labelStyles:r,nodeStyles:l}=W(e);e.labelStyle=r;let{shapeSvg:t,bbox:i,label:o}=await z(h,e,q(e)),a=i.width+(e.padding??0),d=i.height+(e.padding??0),s=Math.max(5,d*.1),{cssStyles:n}=e,c=[...ne(a/2,-d/2,s,20,-90,0),{x:a/2+s,y:-s},...ne(a/2+s*2,-s,s,20,-180,-270),...ne(a/2+s*2,s,s,20,-90,-180),{x:a/2+s,y:d/2},...ne(a/2,d/2,s,20,0,90)],p=[{x:-a/2,y:-d/2-s},{x:a/2,y:-d/2-s},...ne(a/2,-d/2,s,20,-90,0),{x:a/2+s,y:-s},...ne(a/2+s*2,-s,s,20,-180,-270),...ne(a/2+s*2,s,s,20,-90,-180),{x:a/2+s,y:d/2},...ne(a/2,d/2,s,20,0,90),{x:a/2,y:d/2+s},{x:-a/2,y:d/2+s}],g=E.svg(t),y=O(e,{fill:"none"});e.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");let f=F(c).replace("Z",""),m=g.path(f,y),u=F(p),x=g.path(u,{...y}),w=t.insert("g",":first-child");return w.insert(()=>x,":first-child").attr("stroke-opacity",0),w.insert(()=>m,":first-child"),w.attr("class","text"),n&&e.look!=="handDrawn"&&w.selectAll("path").attr("style",n),l&&e.look!=="handDrawn"&&w.selectAll("path").attr("style",l),w.attr("transform",`translate(${-s}, 0)`),o.attr("transform",`translate(${-a/2+(e.padding??0)/2-(i.x-(i.left??0))},${-d/2+(e.padding??0)/2-(i.y-(i.top??0))})`),j(e,w),e.intersect=function(M){return L.polygon(e,p,M)},t}b(sa,"curlyBraceRight");function X(h,e,r,l=100,t=0,i=180){let o=[],a=t*Math.PI/180,d=(i*Math.PI/180-a)/(l-1);for(let s=0;s<l;s++){let n=a+s*d,c=h+r*Math.cos(n),p=e+r*Math.sin(n);o.push({x:-c,y:-p})}return o}b(X,"generateCirclePoints");async function ra(h,e){let{labelStyles:r,nodeStyles:l}=W(e);e.labelStyle=r;let{shapeSvg:t,bbox:i,label:o}=await z(h,e,q(e)),a=i.width+(e.padding??0),d=i.height+(e.padding??0),s=Math.max(5,d*.1),{cssStyles:n}=e,c=[...X(a/2,-d/2,s,30,-90,0),{x:-a/2-s,y:s},...X(a/2+s*2,-s,s,20,-180,-270),...X(a/2+s*2,s,s,20,-90,-180),{x:-a/2-s,y:-d/2},...X(a/2,d/2,s,20,0,90)],p=[...X(-a/2+s+s/2,-d/2,s,20,-90,-180),{x:a/2-s/2,y:s},...X(-a/2-s/2,-s,s,20,0,90),...X(-a/2-s/2,s,s,20,-90,0),{x:a/2-s/2,y:-s},...X(-a/2+s+s/2,d/2,s,30,-180,-270)],g=[{x:a/2,y:-d/2-s},{x:-a/2,y:-d/2-s},...X(a/2,-d/2,s,20,-90,0),{x:-a/2-s,y:-s},...X(a/2+s*2,-s,s,20,-180,-270),...X(a/2+s*2,s,s,20,-90,-180),{x:-a/2-s,y:d/2},...X(a/2,d/2,s,20,0,90),{x:-a/2,y:d/2+s},{x:a/2-s-s/2,y:d/2+s},...X(-a/2+s+s/2,-d/2,s,20,-90,-180),{x:a/2-s/2,y:s},...X(-a/2-s/2,-s,s,20,0,90),...X(-a/2-s/2,s,s,20,-90,0),{x:a/2-s/2,y:-s},...X(-a/2+s+s/2,d/2,s,30,-180,-270)],y=E.svg(t),f=O(e,{fill:"none"});e.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");let m=F(c).replace("Z",""),u=y.path(m,f),x=F(p).replace("Z",""),w=y.path(x,f),M=F(g),S=y.path(M,{...f}),k=t.insert("g",":first-child");return k.insert(()=>S,":first-child").attr("stroke-opacity",0),k.insert(()=>u,":first-child"),k.insert(()=>w,":first-child"),k.attr("class","text"),n&&e.look!=="handDrawn"&&k.selectAll("path").attr("style",n),l&&e.look!=="handDrawn"&&k.selectAll("path").attr("style",l),k.attr("transform",`translate(${s-s/4}, 0)`),o.attr("transform",`translate(${-a/2+(e.padding??0)/2-(i.x-(i.left??0))},${-d/2+(e.padding??0)/2-(i.y-(i.top??0))})`),j(e,k),e.intersect=function($){return L.polygon(e,g,$)},t}b(ra,"curlyBraces");async function ia(h,e){let{labelStyles:r,nodeStyles:l}=W(e);e.labelStyle=r;let{shapeSvg:t,bbox:i}=await z(h,e,q(e)),o=80,a=20,d=Math.max(o,(i.width+(e.padding??0)*2)*1.25,(e==null?void 0:e.width)??0),s=Math.max(a,i.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),n=s/2,{cssStyles:c}=e,p=E.svg(t),g=O(e,{});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");let y=d,f=s,m=y-n,u=f/4,x=[{x:m,y:0},{x:u,y:0},{x:0,y:f/2},{x:u,y:f},{x:m,y:f},...xt(-m,-f/2,n,50,270,90)],w=F(x),M=p.path(w,g),S=t.insert(()=>M,":first-child");return S.attr("class","basic label-container"),c&&e.look!=="handDrawn"&&S.selectChildren("path").attr("style",c),l&&e.look!=="handDrawn"&&S.selectChildren("path").attr("style",l),S.attr("transform",`translate(${-d/2}, ${-s/2})`),j(e,S),e.intersect=function(k){return L.polygon(e,x,k)},t}b(ia,"curvedTrapezoid");var Rl=b((h,e,r,l,t,i)=>[`M${h},${e+i}`,`a${t},${i} 0,0,0 ${r},0`,`a${t},${i} 0,0,0 ${-r},0`,`l0,${l}`,`a${t},${i} 0,0,0 ${r},0`,`l0,${-l}`].join(" "),"createCylinderPathD"),Tl=b((h,e,r,l,t,i)=>[`M${h},${e+i}`,`M${h+r},${e+i}`,`a${t},${i} 0,0,0 ${-r},0`,`l0,${l}`,`a${t},${i} 0,0,0 ${r},0`,`l0,${-l}`].join(" "),"createOuterCylinderPathD"),Il=b((h,e,r,l,t,i)=>[`M${h-r/2},${-l/2}`,`a${t},${i} 0,0,0 ${r},0`].join(" "),"createInnerCylinderPathD");async function na(h,e){let{labelStyles:r,nodeStyles:l}=W(e);e.labelStyle=r;let{shapeSvg:t,bbox:i,label:o}=await z(h,e,q(e)),a=Math.max(i.width+e.padding,e.width??0),d=a/2,s=d/(2.5+a/50),n=Math.max(i.height+s+e.padding,e.height??0),c,{cssStyles:p}=e;if(e.look==="handDrawn"){let g=E.svg(t),y=Tl(0,0,a,n,d,s),f=Il(0,s,a,n,d,s),m=g.path(y,O(e,{})),u=g.path(f,O(e,{fill:"none"}));c=t.insert(()=>u,":first-child"),c=t.insert(()=>m,":first-child"),c.attr("class","basic label-container"),p&&c.attr("style",p)}else{let g=Rl(0,0,a,n,d,s);c=t.insert("path",":first-child").attr("d",g).attr("class","basic label-container").attr("style",ee(p)).attr("style",l)}return c.attr("label-offset-y",s),c.attr("transform",`translate(${-a/2}, ${-(n/2+s)})`),j(e,c),o.attr("transform",`translate(${-(i.width/2)-(i.x-(i.left??0))}, ${-(i.height/2)+(e.padding??0)/1.5-(i.y-(i.top??0))})`),e.intersect=function(g){let y=L.rect(e,g),f=y.x-(e.x??0);if(d!=0&&(Math.abs(f)<(e.width??0)/2||Math.abs(f)==(e.width??0)/2&&Math.abs(y.y-(e.y??0))>(e.height??0)/2-s)){let m=s*s*(1-f*f/(d*d));m>0&&(m=Math.sqrt(m)),m=s-m,g.y-(e.y??0)>0&&(m=-m),y.y+=m}return y},t}b(na,"cylinder");async function ha(h,e){let{labelStyles:r,nodeStyles:l}=W(e);e.labelStyle=r;let{shapeSvg:t,bbox:i,label:o}=await z(h,e,q(e)),a=i.width+e.padding,d=i.height+e.padding,s=d*.2,n=-a/2,c=-d/2-s/2,{cssStyles:p}=e,g=E.svg(t),y=O(e,{});e.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");let f=[{x:n,y:c+s},{x:-n,y:c+s},{x:-n,y:-c},{x:n,y:-c},{x:n,y:c},{x:-n,y:c},{x:-n,y:c+s}],m=g.polygon(f.map(x=>[x.x,x.y]),y),u=t.insert(()=>m,":first-child");return u.attr("class","basic label-container"),p&&e.look!=="handDrawn"&&u.selectAll("path").attr("style",p),l&&e.look!=="handDrawn"&&u.selectAll("path").attr("style",l),o.attr("transform",`translate(${n+(e.padding??0)/2-(i.x-(i.left??0))}, ${c+s+(e.padding??0)/2-(i.y-(i.top??0))})`),j(e,u),e.intersect=function(x){return L.rect(e,x)},t}b(ha,"dividedRectangle");async function oa(h,e){var c,p;let{labelStyles:r,nodeStyles:l}=W(e);e.labelStyle=r;let{shapeSvg:t,bbox:i,halfPadding:o}=await z(h,e,q(e)),a=i.width/2+o+5,d=i.width/2+o,s,{cssStyles:n}=e;if(e.look==="handDrawn"){let g=E.svg(t),y=O(e,{roughness:.2,strokeWidth:2.5}),f=O(e,{roughness:.2,strokeWidth:1.5}),m=g.circle(0,0,a*2,y),u=g.circle(0,0,d*2,f);s=t.insert("g",":first-child"),s.attr("class",ee(e.cssClasses)).attr("style",ee(n)),(c=s.node())==null||c.appendChild(m),(p=s.node())==null||p.appendChild(u)}else{s=t.insert("g",":first-child");let g=s.insert("circle",":first-child"),y=s.insert("circle");s.attr("class","basic label-container").attr("style",l),g.attr("class","outer-circle").attr("style",l).attr("r",a).attr("cx",0).attr("cy",0),y.attr("class","inner-circle").attr("style",l).attr("r",d).attr("cx",0).attr("cy",0)}return j(e,s),e.intersect=function(g){return G.info("DoubleCircle intersect",e,a,g),L.circle(e,a,g)},t}b(oa,"doublecircle");function da(h,e,{config:{themeVariables:r}}){let{labelStyles:l,nodeStyles:t}=W(e);e.label="",e.labelStyle=l;let i=h.insert("g").attr("class",q(e)).attr("id",e.domId??e.id),o=7,{cssStyles:a}=e,d=E.svg(i),{nodeBorder:s}=r,n=O(e,{fillStyle:"solid"});e.look!=="handDrawn"&&(n.roughness=0);let c=d.circle(0,0,o*2,n),p=i.insert(()=>c,":first-child");return p.selectAll("path").attr("style",`fill: ${s} !important;`),a&&a.length>0&&e.look!=="handDrawn"&&p.selectAll("path").attr("style",a),t&&e.look!=="handDrawn"&&p.selectAll("path").attr("style",t),j(e,p),e.intersect=function(g){return G.info("filledCircle intersect",e,{radius:o,point:g}),L.circle(e,o,g)},i}b(da,"filledCircle");async function ca(h,e){let{labelStyles:r,nodeStyles:l}=W(e);e.labelStyle=r;let{shapeSvg:t,bbox:i,label:o}=await z(h,e,q(e)),a=i.width+(e.padding??0),d=a+i.height,s=a+i.height,n=[{x:0,y:-d},{x:s,y:-d},{x:s/2,y:0}],{cssStyles:c}=e,p=E.svg(t),g=O(e,{});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");let y=F(n),f=p.path(y,g),m=t.insert(()=>f,":first-child").attr("transform",`translate(${-d/2}, ${d/2})`);return c&&e.look!=="handDrawn"&&m.selectChildren("path").attr("style",c),l&&e.look!=="handDrawn"&&m.selectChildren("path").attr("style",l),e.width=a,e.height=d,j(e,m),o.attr("transform",`translate(${-i.width/2-(i.x-(i.left??0))}, ${-d/2+(e.padding??0)/2+(i.y-(i.top??0))})`),e.intersect=function(u){return G.info("Triangle intersect",e,n,u),L.polygon(e,n,u)},t}b(ca,"flippedTriangle");function ga(h,e,{dir:r,config:{state:l,themeVariables:t}}){let{nodeStyles:i}=W(e);e.label="";let o=h.insert("g").attr("class",q(e)).attr("id",e.domId??e.id),{cssStyles:a}=e,d=Math.max(70,(e==null?void 0:e.width)??0),s=Math.max(10,(e==null?void 0:e.height)??0);r==="LR"&&(d=Math.max(10,(e==null?void 0:e.width)??0),s=Math.max(70,(e==null?void 0:e.height)??0));let n=-1*d/2,c=-1*s/2,p=E.svg(o),g=O(e,{stroke:t.lineColor,fill:t.lineColor});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");let y=p.rectangle(n,c,d,s,g),f=o.insert(()=>y,":first-child");a&&e.look!=="handDrawn"&&f.selectAll("path").attr("style",a),i&&e.look!=="handDrawn"&&f.selectAll("path").attr("style",i),j(e,f);let m=(l==null?void 0:l.padding)??0;return e.width&&e.height&&(e.width+=m/2||0,e.height+=m/2||0),e.intersect=function(u){return L.rect(e,u)},o}b(ga,"forkJoin");async function pa(h,e){let{labelStyles:r,nodeStyles:l}=W(e);e.labelStyle=r;let t=80,i=50,{shapeSvg:o,bbox:a}=await z(h,e,q(e)),d=Math.max(t,a.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),s=Math.max(i,a.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),n=s/2,{cssStyles:c}=e,p=E.svg(o),g=O(e,{});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");let y=[{x:-d/2,y:-s/2},{x:d/2-n,y:-s/2},...xt(-d/2+n,0,n,50,90,270),{x:d/2-n,y:s/2},{x:-d/2,y:s/2}],f=F(y),m=p.path(f,g),u=o.insert(()=>m,":first-child");return u.attr("class","basic label-container"),c&&e.look!=="handDrawn"&&u.selectChildren("path").attr("style",c),l&&e.look!=="handDrawn"&&u.selectChildren("path").attr("style",l),j(e,u),e.intersect=function(x){return G.info("Pill intersect",e,{radius:n,point:x}),L.polygon(e,y,x)},o}b(pa,"halfRoundedRectangle");var Ol=b((h,e,r,l,t)=>[`M${h+t},${e}`,`L${h+r-t},${e}`,`L${h+r},${e-l/2}`,`L${h+r-t},${e-l}`,`L${h+t},${e-l}`,`L${h},${e-l/2}`,"Z"].join(" "),"createHexagonPathD");async function ya(h,e){let{labelStyles:r,nodeStyles:l}=W(e);e.labelStyle=r;let{shapeSvg:t,bbox:i}=await z(h,e,q(e)),o=4,a=i.height+e.padding,d=a/o,s=i.width+2*d+e.padding,n=[{x:d,y:0},{x:s-d,y:0},{x:s,y:-a/2},{x:s-d,y:-a},{x:d,y:-a},{x:0,y:-a/2}],c,{cssStyles:p}=e;if(e.look==="handDrawn"){let g=E.svg(t),y=O(e,{}),f=Ol(0,0,s,a,d),m=g.path(f,y);c=t.insert(()=>m,":first-child").attr("transform",`translate(${-s/2}, ${a/2})`),p&&c.attr("style",p)}else c=de(t,s,a,n);return l&&c.attr("style",l),e.width=s,e.height=a,j(e,c),e.intersect=function(g){return L.polygon(e,n,g)},t}b(ya,"hexagon");async function fa(h,e){let{labelStyles:r,nodeStyles:l}=W(e);e.label="",e.labelStyle=r;let{shapeSvg:t}=await z(h,e,q(e)),i=Math.max(30,(e==null?void 0:e.width)??0),o=Math.max(30,(e==null?void 0:e.height)??0),{cssStyles:a}=e,d=E.svg(t),s=O(e,{});e.look!=="handDrawn"&&(s.roughness=0,s.fillStyle="solid");let n=[{x:0,y:0},{x:i,y:0},{x:0,y:o},{x:i,y:o}],c=F(n),p=d.path(c,s),g=t.insert(()=>p,":first-child");return g.attr("class","basic label-container"),a&&e.look!=="handDrawn"&&g.selectChildren("path").attr("style",a),l&&e.look!=="handDrawn"&&g.selectChildren("path").attr("style",l),g.attr("transform",`translate(${-i/2}, ${-o/2})`),j(e,g),e.intersect=function(y){return G.info("Pill intersect",e,{points:n}),L.polygon(e,n,y)},t}b(fa,"hourglass");async function ua(h,e,{config:{themeVariables:r,flowchart:l}}){let{labelStyles:t}=W(e);e.labelStyle=t;let i=e.assetHeight??48,o=e.assetWidth??48,a=Math.max(i,o),d=l==null?void 0:l.wrappingWidth;e.width=Math.max(a,d??0);let{shapeSvg:s,bbox:n,label:c}=await z(h,e,"icon-shape default"),p=e.pos==="t",g=a,y=a,{nodeBorder:f}=r,{stylesMap:m}=Ae(e),u=-y/2,x=-g/2,w=e.label?8:0,M=E.svg(s),S=O(e,{stroke:"none",fill:"none"});e.look!=="handDrawn"&&(S.roughness=0,S.fillStyle="solid");let k=M.rectangle(u,x,y,g,S),$=Math.max(y,n.width),D=g+n.height+w,N=M.rectangle(-$/2,-D/2,$,D,{...S,fill:"transparent",stroke:"none"}),B=s.insert(()=>k,":first-child"),v=s.insert(()=>N);if(e.icon){let H=s.append("g");H.html(`<g>${await tt(e.icon,{height:a,width:a,fallbackPrefix:""})}</g>`);let P=H.node().getBBox(),C=P.width,R=P.height,A=P.x,T=P.y;H.attr("transform",`translate(${-C/2-A},${p?n.height/2+w/2-R/2-T:-n.height/2-w/2-R/2-T})`),H.attr("style",`color: ${m.get("stroke")??f};`)}return c.attr("transform",`translate(${-n.width/2-(n.x-(n.left??0))},${p?-D/2:D/2-n.height})`),B.attr("transform",`translate(0,${p?n.height/2+w/2:-n.height/2-w/2})`),j(e,v),e.intersect=function(H){if(G.info("iconSquare intersect",e,H),!e.label)return L.rect(e,H);let P=e.x??0,C=e.y??0,R=e.height??0,A=[];return p?A=[{x:P-n.width/2,y:C-R/2},{x:P+n.width/2,y:C-R/2},{x:P+n.width/2,y:C-R/2+n.height+w},{x:P+y/2,y:C-R/2+n.height+w},{x:P+y/2,y:C+R/2},{x:P-y/2,y:C+R/2},{x:P-y/2,y:C-R/2+n.height+w},{x:P-n.width/2,y:C-R/2+n.height+w}]:A=[{x:P-y/2,y:C-R/2},{x:P+y/2,y:C-R/2},{x:P+y/2,y:C-R/2+g},{x:P+n.width/2,y:C-R/2+g},{x:P+n.width/2/2,y:C+R/2},{x:P-n.width/2,y:C+R/2},{x:P-n.width/2,y:C-R/2+g},{x:P-y/2,y:C-R/2+g}],L.polygon(e,A,H)},s}b(ua,"icon");async function ma(h,e,{config:{themeVariables:r,flowchart:l}}){let{labelStyles:t}=W(e);e.labelStyle=t;let i=e.assetHeight??48,o=e.assetWidth??48,a=Math.max(i,o),d=l==null?void 0:l.wrappingWidth;e.width=Math.max(a,d??0);let{shapeSvg:s,bbox:n,label:c}=await z(h,e,"icon-shape default"),p=20,g=e.label?8:0,y=e.pos==="t",{nodeBorder:f,mainBkg:m}=r,{stylesMap:u}=Ae(e),x=E.svg(s),w=O(e,{});e.look!=="handDrawn"&&(w.roughness=0,w.fillStyle="solid");let M=u.get("fill");w.stroke=M??m;let S=s.append("g");e.icon&&S.html(`<g>${await tt(e.icon,{height:a,width:a,fallbackPrefix:""})}</g>`);let k=S.node().getBBox(),$=k.width,D=k.height,N=k.x,B=k.y,v=Math.max($,D)*Math.SQRT2+p*2,H=x.circle(0,0,v,w),P=Math.max(v,n.width),C=v+n.height+g,R=x.rectangle(-P/2,-C/2,P,C,{...w,fill:"transparent",stroke:"none"}),A=s.insert(()=>H,":first-child"),T=s.insert(()=>R);return S.attr("transform",`translate(${-$/2-N},${y?n.height/2+g/2-D/2-B:-n.height/2-g/2-D/2-B})`),S.attr("style",`color: ${u.get("stroke")??f};`),c.attr("transform",`translate(${-n.width/2-(n.x-(n.left??0))},${y?-C/2:C/2-n.height})`),A.attr("transform",`translate(0,${y?n.height/2+g/2:-n.height/2-g/2})`),j(e,T),e.intersect=function(I){return G.info("iconSquare intersect",e,I),L.rect(e,I)},s}b(ma,"iconCircle");async function xa(h,e,{config:{themeVariables:r,flowchart:l}}){let{labelStyles:t}=W(e);e.labelStyle=t;let i=e.assetHeight??48,o=e.assetWidth??48,a=Math.max(i,o),d=l==null?void 0:l.wrappingWidth;e.width=Math.max(a,d??0);let{shapeSvg:s,bbox:n,halfPadding:c,label:p}=await z(h,e,"icon-shape default"),g=e.pos==="t",y=a+c*2,f=a+c*2,{nodeBorder:m,mainBkg:u}=r,{stylesMap:x}=Ae(e),w=-f/2,M=-y/2,S=e.label?8:0,k=E.svg(s),$=O(e,{});e.look!=="handDrawn"&&($.roughness=0,$.fillStyle="solid");let D=x.get("fill");$.stroke=D??u;let N=k.path(oe(w,M,f,y,5),$),B=Math.max(f,n.width),v=y+n.height+S,H=k.rectangle(-B/2,-v/2,B,v,{...$,fill:"transparent",stroke:"none"}),P=s.insert(()=>N,":first-child").attr("class","icon-shape2"),C=s.insert(()=>H);if(e.icon){let R=s.append("g");R.html(`<g>${await tt(e.icon,{height:a,width:a,fallbackPrefix:""})}</g>`);let A=R.node().getBBox(),T=A.width,I=A.height,Z=A.x,K=A.y;R.attr("transform",`translate(${-T/2-Z},${g?n.height/2+S/2-I/2-K:-n.height/2-S/2-I/2-K})`),R.attr("style",`color: ${x.get("stroke")??m};`)}return p.attr("transform",`translate(${-n.width/2-(n.x-(n.left??0))},${g?-v/2:v/2-n.height})`),P.attr("transform",`translate(0,${g?n.height/2+S/2:-n.height/2-S/2})`),j(e,C),e.intersect=function(R){if(G.info("iconSquare intersect",e,R),!e.label)return L.rect(e,R);let A=e.x??0,T=e.y??0,I=e.height??0,Z=[];return g?Z=[{x:A-n.width/2,y:T-I/2},{x:A+n.width/2,y:T-I/2},{x:A+n.width/2,y:T-I/2+n.height+S},{x:A+f/2,y:T-I/2+n.height+S},{x:A+f/2,y:T+I/2},{x:A-f/2,y:T+I/2},{x:A-f/2,y:T-I/2+n.height+S},{x:A-n.width/2,y:T-I/2+n.height+S}]:Z=[{x:A-f/2,y:T-I/2},{x:A+f/2,y:T-I/2},{x:A+f/2,y:T-I/2+y},{x:A+n.width/2,y:T-I/2+y},{x:A+n.width/2/2,y:T+I/2},{x:A-n.width/2,y:T+I/2},{x:A-n.width/2,y:T-I/2+y},{x:A-f/2,y:T-I/2+y}],L.polygon(e,Z,R)},s}b(xa,"iconRounded");async function ba(h,e,{config:{themeVariables:r,flowchart:l}}){let{labelStyles:t}=W(e);e.labelStyle=t;let i=e.assetHeight??48,o=e.assetWidth??48,a=Math.max(i,o),d=l==null?void 0:l.wrappingWidth;e.width=Math.max(a,d??0);let{shapeSvg:s,bbox:n,halfPadding:c,label:p}=await z(h,e,"icon-shape default"),g=e.pos==="t",y=a+c*2,f=a+c*2,{nodeBorder:m,mainBkg:u}=r,{stylesMap:x}=Ae(e),w=-f/2,M=-y/2,S=e.label?8:0,k=E.svg(s),$=O(e,{});e.look!=="handDrawn"&&($.roughness=0,$.fillStyle="solid");let D=x.get("fill");$.stroke=D??u;let N=k.path(oe(w,M,f,y,.1),$),B=Math.max(f,n.width),v=y+n.height+S,H=k.rectangle(-B/2,-v/2,B,v,{...$,fill:"transparent",stroke:"none"}),P=s.insert(()=>N,":first-child"),C=s.insert(()=>H);if(e.icon){let R=s.append("g");R.html(`<g>${await tt(e.icon,{height:a,width:a,fallbackPrefix:""})}</g>`);let A=R.node().getBBox(),T=A.width,I=A.height,Z=A.x,K=A.y;R.attr("transform",`translate(${-T/2-Z},${g?n.height/2+S/2-I/2-K:-n.height/2-S/2-I/2-K})`),R.attr("style",`color: ${x.get("stroke")??m};`)}return p.attr("transform",`translate(${-n.width/2-(n.x-(n.left??0))},${g?-v/2:v/2-n.height})`),P.attr("transform",`translate(0,${g?n.height/2+S/2:-n.height/2-S/2})`),j(e,C),e.intersect=function(R){if(G.info("iconSquare intersect",e,R),!e.label)return L.rect(e,R);let A=e.x??0,T=e.y??0,I=e.height??0,Z=[];return g?Z=[{x:A-n.width/2,y:T-I/2},{x:A+n.width/2,y:T-I/2},{x:A+n.width/2,y:T-I/2+n.height+S},{x:A+f/2,y:T-I/2+n.height+S},{x:A+f/2,y:T+I/2},{x:A-f/2,y:T+I/2},{x:A-f/2,y:T-I/2+n.height+S},{x:A-n.width/2,y:T-I/2+n.height+S}]:Z=[{x:A-f/2,y:T-I/2},{x:A+f/2,y:T-I/2},{x:A+f/2,y:T-I/2+y},{x:A+n.width/2,y:T-I/2+y},{x:A+n.width/2/2,y:T+I/2},{x:A-n.width/2,y:T+I/2},{x:A-n.width/2,y:T-I/2+y},{x:A-f/2,y:T-I/2+y}],L.polygon(e,Z,R)},s}b(ba,"iconSquare");async function wa(h,e,{config:{flowchart:r}}){let l=new Image;l.src=(e==null?void 0:e.img)??"",await l.decode();let t=Number(l.naturalWidth.toString().replace("px","")),i=Number(l.naturalHeight.toString().replace("px",""));e.imageAspectRatio=t/i;let{labelStyles:o}=W(e);e.labelStyle=o;let a=r==null?void 0:r.wrappingWidth;e.defaultWidth=r==null?void 0:r.wrappingWidth;let d=Math.max(e.label?a??0:0,(e==null?void 0:e.assetWidth)??t),s=e.constraint==="on"&&(e!=null&&e.assetHeight)?e.assetHeight*e.imageAspectRatio:d,n=e.constraint==="on"?s/e.imageAspectRatio:(e==null?void 0:e.assetHeight)??i;e.width=Math.max(s,a??0);let{shapeSvg:c,bbox:p,label:g}=await z(h,e,"image-shape default"),y=e.pos==="t",f=-s/2,m=-n/2,u=e.label?8:0,x=E.svg(c),w=O(e,{});e.look!=="handDrawn"&&(w.roughness=0,w.fillStyle="solid");let M=x.rectangle(f,m,s,n,w),S=Math.max(s,p.width),k=n+p.height+u,$=x.rectangle(-S/2,-k/2,S,k,{...w,fill:"none",stroke:"none"}),D=c.insert(()=>M,":first-child"),N=c.insert(()=>$);if(e.img){let B=c.append("image");B.attr("href",e.img),B.attr("width",s),B.attr("height",n),B.attr("preserveAspectRatio","none"),B.attr("transform",`translate(${-s/2},${y?k/2-n:-k/2})`)}return g.attr("transform",`translate(${-p.width/2-(p.x-(p.left??0))},${y?-n/2-p.height/2-u/2:n/2-p.height/2+u/2})`),D.attr("transform",`translate(0,${y?p.height/2+u/2:-p.height/2-u/2})`),j(e,N),e.intersect=function(B){if(G.info("iconSquare intersect",e,B),!e.label)return L.rect(e,B);let v=e.x??0,H=e.y??0,P=e.height??0,C=[];return y?C=[{x:v-p.width/2,y:H-P/2},{x:v+p.width/2,y:H-P/2},{x:v+p.width/2,y:H-P/2+p.height+u},{x:v+s/2,y:H-P/2+p.height+u},{x:v+s/2,y:H+P/2},{x:v-s/2,y:H+P/2},{x:v-s/2,y:H-P/2+p.height+u},{x:v-p.width/2,y:H-P/2+p.height+u}]:C=[{x:v-s/2,y:H-P/2},{x:v+s/2,y:H-P/2},{x:v+s/2,y:H-P/2+n},{x:v+p.width/2,y:H-P/2+n},{x:v+p.width/2/2,y:H+P/2},{x:v-p.width/2,y:H+P/2},{x:v-p.width/2,y:H-P/2+n},{x:v-s/2,y:H-P/2+n}],L.polygon(e,C,B)},c}b(wa,"imageSquare");async function Sa(h,e){let{labelStyles:r,nodeStyles:l}=W(e);e.labelStyle=r;let{shapeSvg:t,bbox:i}=await z(h,e,q(e)),o=Math.max(i.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),a=Math.max(i.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),d=[{x:0,y:0},{x:o,y:0},{x:o+3*a/6,y:-a},{x:-3*a/6,y:-a}],s,{cssStyles:n}=e;if(e.look==="handDrawn"){let c=E.svg(t),p=O(e,{}),g=F(d),y=c.path(g,p);s=t.insert(()=>y,":first-child").attr("transform",`translate(${-o/2}, ${a/2})`),n&&s.attr("style",n)}else s=de(t,o,a,d);return l&&s.attr("style",l),e.width=o,e.height=a,j(e,s),e.intersect=function(c){return L.polygon(e,d,c)},t}b(Sa,"inv_trapezoid");async function ze(h,e,r){let{labelStyles:l,nodeStyles:t}=W(e);e.labelStyle=l;let{shapeSvg:i,bbox:o}=await z(h,e,q(e)),a=Math.max(o.width+r.labelPaddingX*2,(e==null?void 0:e.width)||0),d=Math.max(o.height+r.labelPaddingY*2,(e==null?void 0:e.height)||0),s=-a/2,n=-d/2,c,{rx:p,ry:g}=e,{cssStyles:y}=e;if(r!=null&&r.rx&&r.ry&&(p=r.rx,g=r.ry),e.look==="handDrawn"){let f=E.svg(i),m=O(e,{}),u=p||g?f.path(oe(s,n,a,d,p||0),m):f.rectangle(s,n,a,d,m);c=i.insert(()=>u,":first-child"),c.attr("class","basic label-container").attr("style",ee(y))}else c=i.insert("rect",":first-child"),c.attr("class","basic label-container").attr("style",t).attr("rx",ee(p)).attr("ry",ee(g)).attr("x",s).attr("y",n).attr("width",a).attr("height",d);return j(e,c),e.intersect=function(f){return L.rect(e,f)},i}b(ze,"drawRect");async function ka(h,e){let{shapeSvg:r,bbox:l,label:t}=await z(h,e,"label"),i=r.insert("rect",":first-child");return i.attr("width",.1).attr("height",.1),r.attr("class","label edgeLabel"),t.attr("transform",`translate(${-(l.width/2)-(l.x-(l.left??0))}, ${-(l.height/2)-(l.y-(l.top??0))})`),j(e,i),e.intersect=function(o){return L.rect(e,o)},r}b(ka,"labelRect");async function Ma(h,e){let{labelStyles:r,nodeStyles:l}=W(e);e.labelStyle=r;let{shapeSvg:t,bbox:i}=await z(h,e,q(e)),o=Math.max(i.width+(e.padding??0),(e==null?void 0:e.width)??0),a=Math.max(i.height+(e.padding??0),(e==null?void 0:e.height)??0),d=[{x:0,y:0},{x:o+3*a/6,y:0},{x:o,y:-a},{x:-(3*a)/6,y:-a}],s,{cssStyles:n}=e;if(e.look==="handDrawn"){let c=E.svg(t),p=O(e,{}),g=F(d),y=c.path(g,p);s=t.insert(()=>y,":first-child").attr("transform",`translate(${-o/2}, ${a/2})`),n&&s.attr("style",n)}else s=de(t,o,a,d);return l&&s.attr("style",l),e.width=o,e.height=a,j(e,s),e.intersect=function(c){return L.polygon(e,d,c)},t}b(Ma,"lean_left");async function $a(h,e){let{labelStyles:r,nodeStyles:l}=W(e);e.labelStyle=r;let{shapeSvg:t,bbox:i}=await z(h,e,q(e)),o=Math.max(i.width+(e.padding??0),(e==null?void 0:e.width)??0),a=Math.max(i.height+(e.padding??0),(e==null?void 0:e.height)??0),d=[{x:-3*a/6,y:0},{x:o,y:0},{x:o+3*a/6,y:-a},{x:0,y:-a}],s,{cssStyles:n}=e;if(e.look==="handDrawn"){let c=E.svg(t),p=O(e,{}),g=F(d),y=c.path(g,p);s=t.insert(()=>y,":first-child").attr("transform",`translate(${-o/2}, ${a/2})`),n&&s.attr("style",n)}else s=de(t,o,a,d);return l&&s.attr("style",l),e.width=o,e.height=a,j(e,s),e.intersect=function(c){return L.polygon(e,d,c)},t}b($a,"lean_right");function va(h,e){let{labelStyles:r,nodeStyles:l}=W(e);e.label="",e.labelStyle=r;let t=h.insert("g").attr("class",q(e)).attr("id",e.domId??e.id),{cssStyles:i}=e,o=Math.max(35,(e==null?void 0:e.width)??0),a=Math.max(35,(e==null?void 0:e.height)??0),d=7,s=[{x:o,y:0},{x:0,y:a+d/2},{x:o-2*d,y:a+d/2},{x:0,y:2*a},{x:o,y:a-d/2},{x:2*d,y:a-d/2}],n=E.svg(t),c=O(e,{});e.look!=="handDrawn"&&(c.roughness=0,c.fillStyle="solid");let p=F(s),g=n.path(p,c),y=t.insert(()=>g,":first-child");return i&&e.look!=="handDrawn"&&y.selectAll("path").attr("style",i),l&&e.look!=="handDrawn"&&y.selectAll("path").attr("style",l),y.attr("transform",`translate(-${o/2},${-a})`),j(e,y),e.intersect=function(f){return G.info("lightningBolt intersect",e,f),L.polygon(e,s,f)},t}b(va,"lightningBolt");var El=b((h,e,r,l,t,i,o)=>[`M${h},${e+i}`,`a${t},${i} 0,0,0 ${r},0`,`a${t},${i} 0,0,0 ${-r},0`,`l0,${l}`,`a${t},${i} 0,0,0 ${r},0`,`l0,${-l}`,`M${h},${e+i+o}`,`a${t},${i} 0,0,0 ${r},0`].join(" "),"createCylinderPathD"),jl=b((h,e,r,l,t,i,o)=>[`M${h},${e+i}`,`M${h+r},${e+i}`,`a${t},${i} 0,0,0 ${-r},0`,`l0,${l}`,`a${t},${i} 0,0,0 ${r},0`,`l0,${-l}`,`M${h},${e+i+o}`,`a${t},${i} 0,0,0 ${r},0`].join(" "),"createOuterCylinderPathD"),Wl=b((h,e,r,l,t,i)=>[`M${h-r/2},${-l/2}`,`a${t},${i} 0,0,0 ${r},0`].join(" "),"createInnerCylinderPathD");async function Da(h,e){let{labelStyles:r,nodeStyles:l}=W(e);e.labelStyle=r;let{shapeSvg:t,bbox:i,label:o}=await z(h,e,q(e)),a=Math.max(i.width+(e.padding??0),e.width??0),d=a/2,s=d/(2.5+a/50),n=Math.max(i.height+s+(e.padding??0),e.height??0),c=n*.1,p,{cssStyles:g}=e;if(e.look==="handDrawn"){let y=E.svg(t),f=jl(0,0,a,n,d,s,c),m=Wl(0,s,a,n,d,s),u=O(e,{}),x=y.path(f,u),w=y.path(m,u);t.insert(()=>w,":first-child").attr("class","line"),p=t.insert(()=>x,":first-child"),p.attr("class","basic label-container"),g&&p.attr("style",g)}else{let y=El(0,0,a,n,d,s,c);p=t.insert("path",":first-child").attr("d",y).attr("class","basic label-container").attr("style",ee(g)).attr("style",l)}return p.attr("label-offset-y",s),p.attr("transform",`translate(${-a/2}, ${-(n/2+s)})`),j(e,p),o.attr("transform",`translate(${-(i.width/2)-(i.x-(i.left??0))}, ${-(i.height/2)+s-(i.y-(i.top??0))})`),e.intersect=function(y){let f=L.rect(e,y),m=f.x-(e.x??0);if(d!=0&&(Math.abs(m)<(e.width??0)/2||Math.abs(m)==(e.width??0)/2&&Math.abs(f.y-(e.y??0))>(e.height??0)/2-s)){let u=s*s*(1-m*m/(d*d));u>0&&(u=Math.sqrt(u)),u=s-u,y.y-(e.y??0)>0&&(u=-u),f.y+=u}return f},t}b(Da,"linedCylinder");async function Pa(h,e){let{labelStyles:r,nodeStyles:l}=W(e);e.labelStyle=r;let{shapeSvg:t,bbox:i,label:o}=await z(h,e,q(e)),a=Math.max(i.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),d=Math.max(i.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),s=d/4,n=d+s,{cssStyles:c}=e,p=E.svg(t),g=O(e,{});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");let y=[{x:-a/2-a/2*.1,y:-n/2},{x:-a/2-a/2*.1,y:n/2},...ge(-a/2-a/2*.1,n/2,a/2+a/2*.1,n/2,s,.8),{x:a/2+a/2*.1,y:-n/2},{x:-a/2-a/2*.1,y:-n/2},{x:-a/2,y:-n/2},{x:-a/2,y:n/2*1.1},{x:-a/2,y:-n/2}],f=p.polygon(y.map(u=>[u.x,u.y]),g),m=t.insert(()=>f,":first-child");return m.attr("class","basic label-container"),c&&e.look!=="handDrawn"&&m.selectAll("path").attr("style",c),l&&e.look!=="handDrawn"&&m.selectAll("path").attr("style",l),m.attr("transform",`translate(0,${-s/2})`),o.attr("transform",`translate(${-a/2+(e.padding??0)+a/2*.1/2-(i.x-(i.left??0))},${-d/2+(e.padding??0)-s/2-(i.y-(i.top??0))})`),j(e,m),e.intersect=function(u){return L.polygon(e,y,u)},t}b(Pa,"linedWaveEdgedRect");async function Ba(h,e){let{labelStyles:r,nodeStyles:l}=W(e);e.labelStyle=r;let{shapeSvg:t,bbox:i,label:o}=await z(h,e,q(e)),a=Math.max(i.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),d=Math.max(i.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),s=5,n=-a/2,c=-d/2,{cssStyles:p}=e,g=E.svg(t),y=O(e,{}),f=[{x:n-s,y:c+s},{x:n-s,y:c+d+s},{x:n+a-s,y:c+d+s},{x:n+a-s,y:c+d},{x:n+a,y:c+d},{x:n+a,y:c+d-s},{x:n+a+s,y:c+d-s},{x:n+a+s,y:c-s},{x:n+s,y:c-s},{x:n+s,y:c},{x:n,y:c},{x:n,y:c+s}],m=[{x:n,y:c+s},{x:n+a-s,y:c+s},{x:n+a-s,y:c+d},{x:n+a,y:c+d},{x:n+a,y:c},{x:n,y:c}];e.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");let u=F(f),x=g.path(u,y),w=F(m),M=g.path(w,{...y,fill:"none"}),S=t.insert(()=>M,":first-child");return S.insert(()=>x,":first-child"),S.attr("class","basic label-container"),p&&e.look!=="handDrawn"&&S.selectAll("path").attr("style",p),l&&e.look!=="handDrawn"&&S.selectAll("path").attr("style",l),o.attr("transform",`translate(${-(i.width/2)-s-(i.x-(i.left??0))}, ${-(i.height/2)+s-(i.y-(i.top??0))})`),j(e,S),e.intersect=function(k){return L.polygon(e,f,k)},t}b(Ba,"multiRect");async function Ca(h,e){let{labelStyles:r,nodeStyles:l}=W(e);e.labelStyle=r;let{shapeSvg:t,bbox:i,label:o}=await z(h,e,q(e)),a=Math.max(i.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),d=Math.max(i.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),s=d/4,n=d+s,c=-a/2,p=-n/2,g=5,{cssStyles:y}=e,f=ge(c-g,p+n+g,c+a-g,p+n+g,s,.8),m=f==null?void 0:f[f.length-1],u=[{x:c-g,y:p+g},{x:c-g,y:p+n+g},...f,{x:c+a-g,y:m.y-g},{x:c+a,y:m.y-g},{x:c+a,y:m.y-2*g},{x:c+a+g,y:m.y-2*g},{x:c+a+g,y:p-g},{x:c+g,y:p-g},{x:c+g,y:p},{x:c,y:p},{x:c,y:p+g}],x=[{x:c,y:p+g},{x:c+a-g,y:p+g},{x:c+a-g,y:m.y-g},{x:c+a,y:m.y-g},{x:c+a,y:p},{x:c,y:p}],w=E.svg(t),M=O(e,{});e.look!=="handDrawn"&&(M.roughness=0,M.fillStyle="solid");let S=F(u),k=w.path(S,M),$=F(x),D=w.path($,M),N=t.insert(()=>k,":first-child");return N.insert(()=>D),N.attr("class","basic label-container"),y&&e.look!=="handDrawn"&&N.selectAll("path").attr("style",y),l&&e.look!=="handDrawn"&&N.selectAll("path").attr("style",l),N.attr("transform",`translate(0,${-s/2})`),o.attr("transform",`translate(${-(i.width/2)-g-(i.x-(i.left??0))}, ${-(i.height/2)+g-s/2-(i.y-(i.top??0))})`),j(e,N),e.intersect=function(B){return L.polygon(e,u,B)},t}b(Ca,"multiWaveEdgedRectangle");async function Aa(h,e,{config:{themeVariables:r}}){var m;let{labelStyles:l,nodeStyles:t}=W(e);e.labelStyle=l,e.useHtmlLabels||((m=Ie().flowchart)==null?void 0:m.htmlLabels)!==!1||(e.centerLabel=!0);let{shapeSvg:i,bbox:o}=await z(h,e,q(e)),a=Math.max(o.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),d=Math.max(o.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),s=-a/2,n=-d/2,{cssStyles:c}=e,p=E.svg(i),g=O(e,{fill:r.noteBkgColor,stroke:r.noteBorderColor});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");let y=p.rectangle(s,n,a,d,g),f=i.insert(()=>y,":first-child");return f.attr("class","basic label-container"),c&&e.look!=="handDrawn"&&f.selectAll("path").attr("style",c),t&&e.look!=="handDrawn"&&f.selectAll("path").attr("style",t),j(e,f),e.intersect=function(u){return L.rect(e,u)},i}b(Aa,"note");var Hl=b((h,e,r)=>[`M${h+r/2},${e}`,`L${h+r},${e-r/2}`,`L${h+r/2},${e-r}`,`L${h},${e-r/2}`,"Z"].join(" "),"createDecisionBoxPathD");async function La(h,e){let{labelStyles:r,nodeStyles:l}=W(e);e.labelStyle=r;let{shapeSvg:t,bbox:i}=await z(h,e,q(e)),o=i.width+e.padding,a=i.height+e.padding,d=o+a,s=[{x:d/2,y:0},{x:d,y:-d/2},{x:d/2,y:-d},{x:0,y:-d/2}],n,{cssStyles:c}=e;if(e.look==="handDrawn"){let p=E.svg(t),g=O(e,{}),y=Hl(0,0,d),f=p.path(y,g);n=t.insert(()=>f,":first-child").attr("transform",`translate(${-d/2}, ${d/2})`),c&&n.attr("style",c)}else n=de(t,d,d,s);return l&&n.attr("style",l),j(e,n),e.intersect=function(p){return G.debug(`APA12 Intersect called SPLIT
point:`,p,`
node:
`,e,`
res:`,L.polygon(e,s,p)),L.polygon(e,s,p)},t}b(La,"question");async function Na(h,e){let{labelStyles:r,nodeStyles:l}=W(e);e.labelStyle=r;let{shapeSvg:t,bbox:i,label:o}=await z(h,e,q(e)),a=Math.max(i.width+(e.padding??0),(e==null?void 0:e.width)??0),d=Math.max(i.height+(e.padding??0),(e==null?void 0:e.height)??0),s=-a/2,n=-d/2,c=n/2,p=[{x:s+c,y:n},{x:s,y:0},{x:s+c,y:-n},{x:-s,y:-n},{x:-s,y:n}],{cssStyles:g}=e,y=E.svg(t),f=O(e,{});e.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");let m=F(p),u=y.path(m,f),x=t.insert(()=>u,":first-child");return x.attr("class","basic label-container"),g&&e.look!=="handDrawn"&&x.selectAll("path").attr("style",g),l&&e.look!=="handDrawn"&&x.selectAll("path").attr("style",l),x.attr("transform",`translate(${-c/2},0)`),o.attr("transform",`translate(${-c/2-i.width/2-(i.x-(i.left??0))}, ${-(i.height/2)-(i.y-(i.top??0))})`),j(e,x),e.intersect=function(w){return L.polygon(e,p,w)},t}b(Na,"rect_left_inv_arrow");async function Ra(h,e){var D,N;let{labelStyles:r,nodeStyles:l}=W(e);e.labelStyle=r;let t;e.cssClasses?t="node "+e.cssClasses:t="node default";let i=h.insert("g").attr("class",t).attr("id",e.domId||e.id),o=i.insert("g"),a=i.insert("g").attr("class","label").attr("style",l),d=e.description,s=e.label,n=a.node().appendChild(await ft(s,e.labelStyle,!0,!0)),c={width:0,height:0};if(Y((N=(D=Q())==null?void 0:D.flowchart)==null?void 0:N.htmlLabels)){let B=n.children[0],v=J(n);c=B.getBoundingClientRect(),v.attr("width",c.width),v.attr("height",c.height)}G.info("Text 2",d);let p=d||[],g=n.getBBox(),y=a.node().appendChild(await ft(p.join?p.join("<br/>"):p,e.labelStyle,!0,!0)),f=y.children[0],m=J(y);c=f.getBoundingClientRect(),m.attr("width",c.width),m.attr("height",c.height);let u=(e.padding||0)/2;J(y).attr("transform","translate( "+(c.width>g.width?0:(g.width-c.width)/2)+", "+(g.height+u+5)+")"),J(n).attr("transform","translate( "+(c.width<g.width?0:-(g.width-c.width)/2)+", 0)"),c=a.node().getBBox(),a.attr("transform","translate("+-c.width/2+", "+(-c.height/2-u+3)+")");let x=c.width+(e.padding||0),w=c.height+(e.padding||0),M=-c.width/2-u,S=-c.height/2-u,k,$;if(e.look==="handDrawn"){let B=E.svg(i),v=O(e,{}),H=B.path(oe(M,S,x,w,e.rx||0),v),P=B.line(-c.width/2-u,-c.height/2-u+g.height+u,c.width/2+u,-c.height/2-u+g.height+u,v);$=i.insert(()=>(G.debug("Rough node insert CXC",H),P),":first-child"),k=i.insert(()=>(G.debug("Rough node insert CXC",H),H),":first-child")}else k=o.insert("rect",":first-child"),$=o.insert("line"),k.attr("class","outer title-state").attr("style",l).attr("x",-c.width/2-u).attr("y",-c.height/2-u).attr("width",c.width+(e.padding||0)).attr("height",c.height+(e.padding||0)),$.attr("class","divider").attr("x1",-c.width/2-u).attr("x2",c.width/2+u).attr("y1",-c.height/2-u+g.height+u).attr("y2",-c.height/2-u+g.height+u);return j(e,k),e.intersect=function(B){return L.rect(e,B)},i}b(Ra,"rectWithTitle");async function Ta(h,e){let r={rx:5,ry:5,labelPaddingX:((e==null?void 0:e.padding)||0)*1,labelPaddingY:((e==null?void 0:e.padding)||0)*1};return ze(h,e,r)}b(Ta,"roundedRect");async function Ia(h,e){let{labelStyles:r,nodeStyles:l}=W(e);e.labelStyle=r;let{shapeSvg:t,bbox:i,label:o}=await z(h,e,q(e)),a=(e==null?void 0:e.padding)??0,d=Math.max(i.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),s=Math.max(i.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),n=-i.width/2-a,c=-i.height/2-a,{cssStyles:p}=e,g=E.svg(t),y=O(e,{});e.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");let f=[{x:n,y:c},{x:n+d+8,y:c},{x:n+d+8,y:c+s},{x:n-8,y:c+s},{x:n-8,y:c},{x:n,y:c},{x:n,y:c+s}],m=g.polygon(f.map(x=>[x.x,x.y]),y),u=t.insert(()=>m,":first-child");return u.attr("class","basic label-container").attr("style",ee(p)),l&&e.look!=="handDrawn"&&u.selectAll("path").attr("style",l),p&&e.look!=="handDrawn"&&u.selectAll("path").attr("style",l),o.attr("transform",`translate(${-d/2+4+(e.padding??0)-(i.x-(i.left??0))},${-s/2+(e.padding??0)-(i.y-(i.top??0))})`),j(e,u),e.intersect=function(x){return L.rect(e,x)},t}b(Ia,"shadedProcess");async function Oa(h,e){let{labelStyles:r,nodeStyles:l}=W(e);e.labelStyle=r;let{shapeSvg:t,bbox:i,label:o}=await z(h,e,q(e)),a=Math.max(i.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),d=Math.max(i.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),s=-a/2,n=-d/2,{cssStyles:c}=e,p=E.svg(t),g=O(e,{});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");let y=[{x:s,y:n},{x:s,y:n+d},{x:s+a,y:n+d},{x:s+a,y:n-d/2}],f=F(y),m=p.path(f,g),u=t.insert(()=>m,":first-child");return u.attr("class","basic label-container"),c&&e.look!=="handDrawn"&&u.selectChildren("path").attr("style",c),l&&e.look!=="handDrawn"&&u.selectChildren("path").attr("style",l),u.attr("transform",`translate(0, ${d/4})`),o.attr("transform",`translate(${-a/2+(e.padding??0)-(i.x-(i.left??0))}, ${-d/4+(e.padding??0)-(i.y-(i.top??0))})`),j(e,u),e.intersect=function(x){return L.polygon(e,y,x)},t}b(Oa,"slopedRect");async function Ea(h,e){let r={rx:0,ry:0,labelPaddingX:((e==null?void 0:e.padding)||0)*2,labelPaddingY:((e==null?void 0:e.padding)||0)*1};return ze(h,e,r)}b(Ea,"squareRect");async function ja(h,e){let{labelStyles:r,nodeStyles:l}=W(e);e.labelStyle=r;let{shapeSvg:t,bbox:i}=await z(h,e,q(e)),o=i.height+e.padding,a=i.width+o/4+e.padding,d,{cssStyles:s}=e;if(e.look==="handDrawn"){let n=E.svg(t),c=O(e,{}),p=oe(-a/2,-o/2,a,o,o/2),g=n.path(p,c);d=t.insert(()=>g,":first-child"),d.attr("class","basic label-container").attr("style",ee(s))}else d=t.insert("rect",":first-child"),d.attr("class","basic label-container").attr("style",l).attr("rx",o/2).attr("ry",o/2).attr("x",-a/2).attr("y",-o/2).attr("width",a).attr("height",o);return j(e,d),e.intersect=function(n){return L.rect(e,n)},t}b(ja,"stadium");async function Wa(h,e){return ze(h,e,{rx:5,ry:5})}b(Wa,"state");function Ha(h,e,{config:{themeVariables:r}}){let{labelStyles:l,nodeStyles:t}=W(e);e.labelStyle=l;let{cssStyles:i}=e,{lineColor:o,stateBorder:a,nodeBorder:d}=r,s=h.insert("g").attr("class","node default").attr("id",e.domId||e.id),n=E.svg(s),c=O(e,{});e.look!=="handDrawn"&&(c.roughness=0,c.fillStyle="solid");let p=n.circle(0,0,14,{...c,stroke:o,strokeWidth:2}),g=a??d,y=n.circle(0,0,5,{...c,fill:g,stroke:g,strokeWidth:2,fillStyle:"solid"}),f=s.insert(()=>p,":first-child");return f.insert(()=>y),i&&f.selectAll("path").attr("style",i),t&&f.selectAll("path").attr("style",t),j(e,f),e.intersect=function(m){return L.circle(e,7,m)},s}b(Ha,"stateEnd");function _a(h,e,{config:{themeVariables:r}}){let{lineColor:l}=r,t=h.insert("g").attr("class","node default").attr("id",e.domId||e.id),i;if(e.look==="handDrawn"){let o=E.svg(t).circle(0,0,14,wl(l));i=t.insert(()=>o),i.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14)}else i=t.insert("circle",":first-child"),i.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14);return j(e,i),e.intersect=function(o){return L.circle(e,7,o)},t}b(_a,"stateStart");async function qa(h,e){let{labelStyles:r,nodeStyles:l}=W(e);e.labelStyle=r;let{shapeSvg:t,bbox:i}=await z(h,e,q(e)),o=((e==null?void 0:e.padding)||0)/2,a=i.width+e.padding,d=i.height+e.padding,s=-i.width/2-o,n=-i.height/2-o,c=[{x:0,y:0},{x:a,y:0},{x:a,y:-d},{x:0,y:-d},{x:0,y:0},{x:-8,y:0},{x:a+8,y:0},{x:a+8,y:-d},{x:-8,y:-d},{x:-8,y:0}];if(e.look==="handDrawn"){let p=E.svg(t),g=O(e,{}),y=p.rectangle(s-8,n,a+16,d,g),f=p.line(s,n,s,n+d,g),m=p.line(s+a,n,s+a,n+d,g);t.insert(()=>f,":first-child"),t.insert(()=>m,":first-child");let u=t.insert(()=>y,":first-child"),{cssStyles:x}=e;u.attr("class","basic label-container").attr("style",ee(x)),j(e,u)}else{let p=de(t,a,d,c);l&&p.attr("style",l),j(e,p)}return e.intersect=function(p){return L.polygon(e,c,p)},t}b(qa,"subroutine");async function za(h,e){let{labelStyles:r,nodeStyles:l}=W(e);e.labelStyle=r;let{shapeSvg:t,bbox:i}=await z(h,e,q(e)),o=Math.max(i.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),a=Math.max(i.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),d=-o/2,s=-a/2,n=.2*a,c=.2*a,{cssStyles:p}=e,g=E.svg(t),y=O(e,{}),f=[{x:d-n/2,y:s},{x:d+o+n/2,y:s},{x:d+o+n/2,y:s+a},{x:d-n/2,y:s+a}],m=[{x:d+o-n/2,y:s+a},{x:d+o+n/2,y:s+a},{x:d+o+n/2,y:s+a-c}];e.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");let u=F(f),x=g.path(u,y),w=F(m),M=g.path(w,{...y,fillStyle:"solid"}),S=t.insert(()=>M,":first-child");return S.insert(()=>x,":first-child"),S.attr("class","basic label-container"),p&&e.look!=="handDrawn"&&S.selectAll("path").attr("style",p),l&&e.look!=="handDrawn"&&S.selectAll("path").attr("style",l),j(e,S),e.intersect=function(k){return L.polygon(e,f,k)},t}b(za,"taggedRect");async function Fa(h,e){let{labelStyles:r,nodeStyles:l}=W(e);e.labelStyle=r;let{shapeSvg:t,bbox:i,label:o}=await z(h,e,q(e)),a=Math.max(i.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),d=Math.max(i.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),s=d/4,n=.2*a,c=.2*d,p=d+s,{cssStyles:g}=e,y=E.svg(t),f=O(e,{});e.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");let m=[{x:-a/2-a/2*.1,y:p/2},...ge(-a/2-a/2*.1,p/2,a/2+a/2*.1,p/2,s,.8),{x:a/2+a/2*.1,y:-p/2},{x:-a/2-a/2*.1,y:-p/2}],u=-a/2+a/2*.1,x=-p/2-c*.4,w=[{x:u+a-n,y:(x+d)*1.4},{x:u+a,y:x+d-c},{x:u+a,y:(x+d)*.9},...ge(u+a,(x+d)*1.3,u+a-n,(x+d)*1.5,-d*.03,.5)],M=F(m),S=y.path(M,f),k=F(w),$=y.path(k,{...f,fillStyle:"solid"}),D=t.insert(()=>$,":first-child");return D.insert(()=>S,":first-child"),D.attr("class","basic label-container"),g&&e.look!=="handDrawn"&&D.selectAll("path").attr("style",g),l&&e.look!=="handDrawn"&&D.selectAll("path").attr("style",l),D.attr("transform",`translate(0,${-s/2})`),o.attr("transform",`translate(${-a/2+(e.padding??0)-(i.x-(i.left??0))},${-d/2+(e.padding??0)-s/2-(i.y-(i.top??0))})`),j(e,D),e.intersect=function(N){return L.polygon(e,m,N)},t}b(Fa,"taggedWaveEdgedRectangle");async function Ga(h,e){let{labelStyles:r,nodeStyles:l}=W(e);e.labelStyle=r;let{shapeSvg:t,bbox:i}=await z(h,e,q(e)),o=Math.max(i.width+e.padding,(e==null?void 0:e.width)||0),a=Math.max(i.height+e.padding,(e==null?void 0:e.height)||0),d=-o/2,s=-a/2,n=t.insert("rect",":first-child");return n.attr("class","text").attr("style",l).attr("rx",0).attr("ry",0).attr("x",d).attr("y",s).attr("width",o).attr("height",a),j(e,n),e.intersect=function(c){return L.rect(e,c)},t}b(Ga,"text");var _l=b((h,e,r,l,t,i)=>`M${h},${e}
    a${t},${i} 0,0,1 0,${-l}
    l${r},0
    a${t},${i} 0,0,1 0,${l}
    M${r},${-l}
    a${t},${i} 0,0,0 0,${l}
    l${-r},0`,"createCylinderPathD"),ql=b((h,e,r,l,t,i)=>[`M${h},${e}`,`M${h+r},${e}`,`a${t},${i} 0,0,0 0,${-l}`,`l${-r},0`,`a${t},${i} 0,0,0 0,${l}`,`l${r},0`].join(" "),"createOuterCylinderPathD"),zl=b((h,e,r,l,t,i)=>[`M${h+r/2},${-l/2}`,`a${t},${i} 0,0,0 0,${l}`].join(" "),"createInnerCylinderPathD");async function Va(h,e){let{labelStyles:r,nodeStyles:l}=W(e);e.labelStyle=r;let{shapeSvg:t,bbox:i,label:o,halfPadding:a}=await z(h,e,q(e)),d=e.look==="neo"?a*2:a,s=i.height+d,n=s/2,c=n/(2.5+s/50),p=i.width+c+d,{cssStyles:g}=e,y;if(e.look==="handDrawn"){let f=E.svg(t),m=ql(0,0,p,s,c,n),u=zl(0,0,p,s,c,n),x=f.path(m,O(e,{})),w=f.path(u,O(e,{fill:"none"}));y=t.insert(()=>w,":first-child"),y=t.insert(()=>x,":first-child"),y.attr("class","basic label-container"),g&&y.attr("style",g)}else{let f=_l(0,0,p,s,c,n);y=t.insert("path",":first-child").attr("d",f).attr("class","basic label-container").attr("style",ee(g)).attr("style",l),y.attr("class","basic label-container"),g&&y.selectAll("path").attr("style",g),l&&y.selectAll("path").attr("style",l)}return y.attr("label-offset-x",c),y.attr("transform",`translate(${-p/2}, ${s/2} )`),o.attr("transform",`translate(${-(i.width/2)-c-(i.x-(i.left??0))}, ${-(i.height/2)-(i.y-(i.top??0))})`),j(e,y),e.intersect=function(f){let m=L.rect(e,f),u=m.y-(e.y??0);if(n!=0&&(Math.abs(u)<(e.height??0)/2||Math.abs(u)==(e.height??0)/2&&Math.abs(m.x-(e.x??0))>(e.width??0)/2-c)){let x=c*c*(1-u*u/(n*n));x!=0&&(x=Math.sqrt(Math.abs(x))),x=c-x,f.x-(e.x??0)>0&&(x=-x),m.x+=x}return m},t}b(Va,"tiltedCylinder");async function Qa(h,e){let{labelStyles:r,nodeStyles:l}=W(e);e.labelStyle=r;let{shapeSvg:t,bbox:i}=await z(h,e,q(e)),o=i.width+e.padding,a=i.height+e.padding,d=[{x:-3*a/6,y:0},{x:o+3*a/6,y:0},{x:o,y:-a},{x:0,y:-a}],s,{cssStyles:n}=e;if(e.look==="handDrawn"){let c=E.svg(t),p=O(e,{}),g=F(d),y=c.path(g,p);s=t.insert(()=>y,":first-child").attr("transform",`translate(${-o/2}, ${a/2})`),n&&s.attr("style",n)}else s=de(t,o,a,d);return l&&s.attr("style",l),e.width=o,e.height=a,j(e,s),e.intersect=function(c){return L.polygon(e,d,c)},t}b(Qa,"trapezoid");async function Za(h,e){let{labelStyles:r,nodeStyles:l}=W(e);e.labelStyle=r;let{shapeSvg:t,bbox:i}=await z(h,e,q(e)),o=60,a=20,d=Math.max(o,i.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),s=Math.max(a,i.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),{cssStyles:n}=e,c=E.svg(t),p=O(e,{});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");let g=[{x:-d/2*.8,y:-s/2},{x:d/2*.8,y:-s/2},{x:d/2,y:-s/2*.6},{x:d/2,y:s/2},{x:-d/2,y:s/2},{x:-d/2,y:-s/2*.6}],y=F(g),f=c.path(y,p),m=t.insert(()=>f,":first-child");return m.attr("class","basic label-container"),n&&e.look!=="handDrawn"&&m.selectChildren("path").attr("style",n),l&&e.look!=="handDrawn"&&m.selectChildren("path").attr("style",l),j(e,m),e.intersect=function(u){return L.polygon(e,g,u)},t}b(Za,"trapezoidalPentagon");async function Xa(h,e){var x;let{labelStyles:r,nodeStyles:l}=W(e);e.labelStyle=r;let{shapeSvg:t,bbox:i,label:o}=await z(h,e,q(e)),a=Y((x=Q().flowchart)==null?void 0:x.htmlLabels),d=i.width+(e.padding??0),s=d+i.height,n=d+i.height,c=[{x:0,y:0},{x:n,y:0},{x:n/2,y:-s}],{cssStyles:p}=e,g=E.svg(t),y=O(e,{});e.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");let f=F(c),m=g.path(f,y),u=t.insert(()=>m,":first-child").attr("transform",`translate(${-s/2}, ${s/2})`);return p&&e.look!=="handDrawn"&&u.selectChildren("path").attr("style",p),l&&e.look!=="handDrawn"&&u.selectChildren("path").attr("style",l),e.width=d,e.height=s,j(e,u),o.attr("transform",`translate(${-i.width/2-(i.x-(i.left??0))}, ${s/2-(i.height+(e.padding??0)/(a?2:1)-(i.y-(i.top??0)))})`),e.intersect=function(w){return G.info("Triangle intersect",e,c,w),L.polygon(e,c,w)},t}b(Xa,"triangle");async function Ja(h,e){let{labelStyles:r,nodeStyles:l}=W(e);e.labelStyle=r;let{shapeSvg:t,bbox:i,label:o}=await z(h,e,q(e)),a=Math.max(i.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),d=Math.max(i.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),s=d/8,n=d+s,{cssStyles:c}=e,p=70-a,g=p>0?p/2:0,y=E.svg(t),f=O(e,{});e.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");let m=[{x:-a/2-g,y:n/2},...ge(-a/2-g,n/2,a/2+g,n/2,s,.8),{x:a/2+g,y:-n/2},{x:-a/2-g,y:-n/2}],u=F(m),x=y.path(u,f),w=t.insert(()=>x,":first-child");return w.attr("class","basic label-container"),c&&e.look!=="handDrawn"&&w.selectAll("path").attr("style",c),l&&e.look!=="handDrawn"&&w.selectAll("path").attr("style",l),w.attr("transform",`translate(0,${-s/2})`),o.attr("transform",`translate(${-a/2+(e.padding??0)-(i.x-(i.left??0))},${-d/2+(e.padding??0)-s-(i.y-(i.top??0))})`),j(e,w),e.intersect=function(M){return L.polygon(e,m,M)},t}b(Ja,"waveEdgedRectangle");async function Ya(h,e){let{labelStyles:r,nodeStyles:l}=W(e);e.labelStyle=r;let{shapeSvg:t,bbox:i}=await z(h,e,q(e)),o=100,a=50,d=Math.max(i.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),s=Math.max(i.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),n=d/s,c=d,p=s;c>p*n?p=c/n:c=p*n,c=Math.max(c,o),p=Math.max(p,a);let g=Math.min(p*.2,p/4),y=p+g*2,{cssStyles:f}=e,m=E.svg(t),u=O(e,{});e.look!=="handDrawn"&&(u.roughness=0,u.fillStyle="solid");let x=[{x:-c/2,y:y/2},...ge(-c/2,y/2,c/2,y/2,g,1),{x:c/2,y:-y/2},...ge(c/2,-y/2,-c/2,-y/2,g,-1)],w=F(x),M=m.path(w,u),S=t.insert(()=>M,":first-child");return S.attr("class","basic label-container"),f&&e.look!=="handDrawn"&&S.selectAll("path").attr("style",f),l&&e.look!=="handDrawn"&&S.selectAll("path").attr("style",l),j(e,S),e.intersect=function(k){return L.polygon(e,x,k)},t}b(Ya,"waveRectangle");async function Ka(h,e){let{labelStyles:r,nodeStyles:l}=W(e);e.labelStyle=r;let{shapeSvg:t,bbox:i,label:o}=await z(h,e,q(e)),a=Math.max(i.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),d=Math.max(i.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),s=5,n=-a/2,c=-d/2,{cssStyles:p}=e,g=E.svg(t),y=O(e,{}),f=[{x:n-s,y:c-s},{x:n-s,y:c+d},{x:n+a,y:c+d},{x:n+a,y:c-s}],m=`M${n-s},${c-s} L${n+a},${c-s} L${n+a},${c+d} L${n-s},${c+d} L${n-s},${c-s}
                M${n-s},${c} L${n+a},${c}
                M${n},${c-s} L${n},${c+d}`;e.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");let u=g.path(m,y),x=t.insert(()=>u,":first-child");return x.attr("transform",`translate(${s/2}, ${s/2})`),x.attr("class","basic label-container"),p&&e.look!=="handDrawn"&&x.selectAll("path").attr("style",p),l&&e.look!=="handDrawn"&&x.selectAll("path").attr("style",l),o.attr("transform",`translate(${-(i.width/2)+s/2-(i.x-(i.left??0))}, ${-(i.height/2)+s/2-(i.y-(i.top??0))})`),j(e,x),e.intersect=function(w){return L.polygon(e,f,w)},t}b(Ka,"windowPane");async function Dt(h,e){var Z,K,Fe;let r=e;if(r.alias&&(e.label=r.alias),e.look==="handDrawn"){let{themeVariables:V}=Ie(),{background:ae}=V,se={...e,id:e.id+"-background",look:"default",cssStyles:["stroke: none",`fill: ${ae}`]};await Dt(h,se)}let l=Ie();e.useHtmlLabels=l.htmlLabels;let t=((Z=l.er)==null?void 0:Z.diagramPadding)??10,i=((K=l.er)==null?void 0:K.entityPadding)??6,{cssStyles:o}=e,{labelStyles:a}=W(e);if(r.attributes.length===0&&e.label){let V={rx:0,ry:0,labelPaddingX:t,labelPaddingY:t*1.5};at(e.label,l)+V.labelPaddingX*2<l.er.minEntityWidth&&(e.width=l.er.minEntityWidth);let ae=await ze(h,e,V);if(!Y(l.htmlLabels)){let se=ae.select("text"),le=(Fe=se.node())==null?void 0:Fe.getBBox();se.attr("transform",`translate(${-le.width/2}, 0)`)}return ae}l.htmlLabels||(t*=1.25,i*=1.25);let d=q(e);d||(d="node default");let s=h.insert("g").attr("class",d).attr("id",e.domId||e.id),n=await me(s,e.label??"",l,0,0,["name"],a);n.height+=i;let c=0,p=[],g=0,y=0,f=0,m=0,u=!0,x=!0;for(let V of r.attributes){let ae=await me(s,V.type,l,0,c,["attribute-type"],a);g=Math.max(g,ae.width+t);let se=await me(s,V.name,l,0,c,["attribute-name"],a);y=Math.max(y,se.width+t);let le=await me(s,V.keys.join(),l,0,c,["attribute-keys"],a);f=Math.max(f,le.width+t);let Le=await me(s,V.comment,l,0,c,["attribute-comment"],a);m=Math.max(m,Le.width+t),c+=Math.max(ae.height,se.height,le.height,Le.height)+i,p.push(c)}p.pop();let w=4;f<=t&&(u=!1,f=0,w--),m<=t&&(x=!1,m=0,w--);let M=s.node().getBBox();if(n.width+t*2-(g+y+f+m)>0){let V=n.width+t*2-(g+y+f+m);g+=V/w,y+=V/w,f>0&&(f+=V/w),m>0&&(m+=V/w)}let S=g+y+f+m,k=E.svg(s),$=O(e,{});e.look!=="handDrawn"&&($.roughness=0,$.fillStyle="solid");let D=Math.max(M.width+t*2,(e==null?void 0:e.width)||0,S),N=Math.max(M.height+(p[0]||c)+i,(e==null?void 0:e.height)||0),B=-D/2,v=-N/2;s.selectAll("g:not(:first-child)").each((V,ae,se)=>{let le=J(se[ae]),Le=le.attr("transform"),Ne=0,Pt=0;if(Le){let rt=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(Le);rt&&(Ne=parseFloat(rt[1]),Pt=parseFloat(rt[2]),le.attr("class").includes("attribute-name")?Ne+=g:le.attr("class").includes("attribute-keys")?Ne+=g+y:le.attr("class").includes("attribute-comment")&&(Ne+=g+y+f))}le.attr("transform",`translate(${B+t/2+Ne}, ${Pt+v+n.height+i/2})`)}),s.select(".name").attr("transform","translate("+-n.width/2+", "+(v+i/2)+")");let H=k.rectangle(B,v,D,N,$),P=s.insert(()=>H,":first-child").attr("style",o.join("")),{themeVariables:C}=Ie(),{rowEven:R,rowOdd:A,nodeBorder:T}=C;p.push(0);for(let[V,ae]of p.entries()){if(V===0&&p.length>1)continue;let se=V%2===0&&ae!==0,le=k.rectangle(B,n.height+v+ae,D,n.height,{...$,fill:se?R:A,stroke:T});s.insert(()=>le,"g.label").attr("style",o.join("")).attr("class",`row-rect-${V%2===0?"even":"odd"}`)}let I=k.line(B,n.height+v,D+B,n.height+v,$);s.insert(()=>I).attr("class","divider"),I=k.line(g+B,n.height+v,g+B,N+v,$),s.insert(()=>I).attr("class","divider"),u&&(I=k.line(g+y+B,n.height+v,g+y+B,N+v,$),s.insert(()=>I).attr("class","divider")),x&&(I=k.line(g+y+f+B,n.height+v,g+y+f+B,N+v,$),s.insert(()=>I).attr("class","divider"));for(let V of p)I=k.line(B,n.height+v+V,D+B,n.height+v+V,$),s.insert(()=>I).attr("class","divider");return j(e,P),e.intersect=function(V){return L.rect(e,V)},s}b(Dt,"erBox");async function me(h,e,r,l=0,t=0,i=[],o=""){let a=h.insert("g").attr("class",`label ${i.join(" ")}`).attr("transform",`translate(${l}, ${t})`).attr("style",o);e!==Bt(e)&&(e=Bt(e),e=e.replaceAll("<","&lt;").replaceAll(">","&gt;"));let d=a.node().appendChild(await ye(a,e,{width:at(e,r)+100,style:o,useHtmlLabels:r.htmlLabels},r));if(e.includes("&lt;")||e.includes("&gt;")){let n=d.children[0];for(n.textContent=n.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">");n.childNodes[0];)n=n.childNodes[0],n.textContent=n.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">")}let s=d.getBBox();if(Y(r.htmlLabels)){let n=d.children[0];n.style.textAlign="start";let c=J(d);s=n.getBoundingClientRect(),c.attr("width",s.width),c.attr("height",s.height)}return s}b(me,"addText");async function Ua(h,e,r,l,t=r.class.padding??12){let i=l?0:3,o=h.insert("g").attr("class",q(e)).attr("id",e.domId||e.id),a=null,d=null,s=null,n=null,c=0,p=0,g=0;if(a=o.insert("g").attr("class","annotation-group text"),e.annotations.length>0){let x=e.annotations[0];await Te(a,{text:`${x}`},0),c=a.node().getBBox().height}d=o.insert("g").attr("class","label-group text"),await Te(d,e,0,["font-weight: bolder"]);let y=d.node().getBBox();p=y.height,s=o.insert("g").attr("class","members-group text");let f=0;for(let x of e.members){let w=await Te(s,x,f,[x.parseClassifier()]);f+=w+i}g=s.node().getBBox().height,g<=0&&(g=t/2),n=o.insert("g").attr("class","methods-group text");let m=0;for(let x of e.methods){let w=await Te(n,x,m,[x.parseClassifier()]);m+=w+i}let u=o.node().getBBox();if(a!==null){let x=a.node().getBBox();a.attr("transform",`translate(${-x.width/2})`)}return d.attr("transform",`translate(${-y.width/2}, ${c})`),u=o.node().getBBox(),s.attr("transform",`translate(0, ${c+p+t*2})`),u=o.node().getBBox(),n.attr("transform",`translate(0, ${c+p+(g?g+t*4:t*2)})`),u=o.node().getBBox(),{shapeSvg:o,bbox:u}}b(Ua,"textHelper");async function Te(h,e,r,l=[]){let t=h.insert("g").attr("class","label").attr("style",l.join("; ")),i=Ie(),o="useHtmlLabels"in e?e.useHtmlLabels:Y(i.htmlLabels)??!0,a="";"text"in e?a=e.text:a=e.label,!o&&a.startsWith("\\")&&(a=a.substring(1)),Nt(a)&&(o=!0);let d=await ye(t,Rt(_e(a)),{width:at(a,i)+50,classes:"markdown-node-label",useHtmlLabels:o},i),s,n=1;if(o){let c=d.children[0],p=J(d);n=c.innerHTML.split("<br>").length,c.innerHTML.includes("</math>")&&(n+=c.innerHTML.split("<mrow>").length-1);let g=c.getElementsByTagName("img");if(g){let y=a.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...g].map(f=>new Promise(m=>{function u(){var x;if(f.style.display="flex",f.style.flexDirection="column",y){let w=((x=i.fontSize)==null?void 0:x.toString())??window.getComputedStyle(document.body).fontSize,M=parseInt(w,10)*5+"px";f.style.minWidth=M,f.style.maxWidth=M}else f.style.width="100%";m(f)}b(u,"setupImage"),setTimeout(()=>{f.complete&&u()}),f.addEventListener("error",u),f.addEventListener("load",u)})))}s=c.getBoundingClientRect(),p.attr("width",s.width),p.attr("height",s.height)}else{l.includes("font-weight: bolder")&&J(d).selectAll("tspan").attr("font-weight",""),n=d.children.length;let c=d.children[0];(d.textContent===""||d.textContent.includes("&gt"))&&(c.textContent=a[0]+a.substring(1).replaceAll("&gt;",">").replaceAll("&lt;","<").trim(),a[1]===" "&&(c.textContent=c.textContent[0]+" "+c.textContent.substring(1))),c.textContent==="undefined"&&(c.textContent=""),s=d.getBBox()}return t.attr("transform","translate(0,"+(-s.height/(2*n)+r)+")"),s.height}b(Te,"addText");async function el(h,e){var N,B;let r=Q(),l=r.class.padding??12,t=l,i=e.useHtmlLabels??Y(r.htmlLabels)??!0,o=e;o.annotations=o.annotations??[],o.members=o.members??[],o.methods=o.methods??[];let{shapeSvg:a,bbox:d}=await Ua(h,e,r,i,t),{labelStyles:s,nodeStyles:n}=W(e);e.labelStyle=s,e.cssStyles=o.styles||"";let c=((N=o.styles)==null?void 0:N.join(";"))||n||"";e.cssStyles||(e.cssStyles=c.replaceAll("!important","").split(";"));let p=o.members.length===0&&o.methods.length===0&&!((B=r.class)!=null&&B.hideEmptyMembersBox),g=E.svg(a),y=O(e,{});e.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");let f=d.width,m=d.height;o.members.length===0&&o.methods.length===0?m+=t:o.members.length>0&&o.methods.length===0&&(m+=t*2);let u=-f/2,x=-m/2,w=g.rectangle(u-l,x-l-(p?l:o.members.length===0&&o.methods.length===0?-l/2:0),f+2*l,m+2*l+(p?l*2:o.members.length===0&&o.methods.length===0?-l:0),y),M=a.insert(()=>w,":first-child");M.attr("class","basic label-container");let S=M.node().getBBox();a.selectAll(".text").each((v,H,P)=>{var Z;let C=J(P[H]),R=C.attr("transform"),A=0;if(R){let K=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(R);K&&(A=parseFloat(K[2]))}let T=A+x+l-(p?l:o.members.length===0&&o.methods.length===0?-l/2:0);i||(T-=4);let I=u;(C.attr("class").includes("label-group")||C.attr("class").includes("annotation-group"))&&(I=-((Z=C.node())==null?void 0:Z.getBBox().width)/2||0,a.selectAll("text").each(function(K,Fe,V){window.getComputedStyle(V[Fe]).textAnchor==="middle"&&(I=0)})),C.attr("transform",`translate(${I}, ${T})`)});let k=a.select(".annotation-group").node().getBBox().height-(p?l/2:0)||0,$=a.select(".label-group").node().getBBox().height-(p?l/2:0)||0,D=a.select(".members-group").node().getBBox().height-(p?l/2:0)||0;if(o.members.length>0||o.methods.length>0||p){let v=g.line(S.x,k+$+x+l,S.x+S.width,k+$+x+l,y);a.insert(()=>v).attr("class","divider").attr("style",c)}if(p||o.members.length>0||o.methods.length>0){let v=g.line(S.x,k+$+D+x+t*2+l,S.x+S.width,k+$+D+x+l+t*2,y);a.insert(()=>v).attr("class","divider").attr("style",c)}if(o.look!=="handDrawn"&&a.selectAll("path").attr("style",c),M.select(":nth-child(2)").attr("style",c),a.selectAll(".divider").select("path").attr("style",c),e.labelStyle?a.selectAll("span").attr("style",e.labelStyle):a.selectAll("span").attr("style",c),!i){let v=RegExp(/color\s*:\s*([^;]*)/),H=v.exec(c);if(H){let P=H[0].replace("color","fill");a.selectAll("tspan").attr("style",P)}else if(s){let P=v.exec(s);if(P){let C=P[0].replace("color","fill");a.selectAll("tspan").attr("style",C)}}}return j(e,M),e.intersect=function(v){return L.rect(e,v)},a}b(el,"classBox");async function tl(h,e){var k,$;let{labelStyles:r,nodeStyles:l}=W(e);e.labelStyle=r;let t=e,i=e,o=20,a=20,d="verifyMethod"in e,s=q(e),n=h.insert("g").attr("class",s).attr("id",e.domId??e.id),c;d?c=await re(n,`&lt;&lt;${t.type}&gt;&gt;`,0,e.labelStyle):c=await re(n,"&lt;&lt;Element&gt;&gt;",0,e.labelStyle);let p=c,g=await re(n,t.name,p,e.labelStyle+"; font-weight: bold;");if(p+=g+a,d){let D=await re(n,`${t.requirementId?`Id: ${t.requirementId}`:""}`,p,e.labelStyle);p+=D;let N=await re(n,`${t.text?`Text: ${t.text}`:""}`,p,e.labelStyle);p+=N;let B=await re(n,`${t.risk?`Risk: ${t.risk}`:""}`,p,e.labelStyle);p+=B,await re(n,`${t.verifyMethod?`Verification: ${t.verifyMethod}`:""}`,p,e.labelStyle)}else{let D=await re(n,`${i.type?`Type: ${i.type}`:""}`,p,e.labelStyle);p+=D,await re(n,`${i.docRef?`Doc Ref: ${i.docRef}`:""}`,p,e.labelStyle)}let y=(((k=n.node())==null?void 0:k.getBBox().width)??200)+o,f=((($=n.node())==null?void 0:$.getBBox().height)??200)+o,m=-y/2,u=-f/2,x=E.svg(n),w=O(e,{});e.look!=="handDrawn"&&(w.roughness=0,w.fillStyle="solid");let M=x.rectangle(m,u,y,f,w),S=n.insert(()=>M,":first-child");if(S.attr("class","basic label-container").attr("style",l),n.selectAll(".label").each((D,N,B)=>{let v=J(B[N]),H=v.attr("transform"),P=0,C=0;if(H){let T=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(H);T&&(P=parseFloat(T[1]),C=parseFloat(T[2]))}let R=C-f/2,A=m+o/2;(N===0||N===1)&&(A=P),v.attr("transform",`translate(${A}, ${R+o})`)}),p>c+g+a){let D=x.line(m,u+c+g+a,m+y,u+c+g+a,w);n.insert(()=>D).attr("style",l)}return j(e,S),e.intersect=function(D){return L.rect(e,D)},n}b(tl,"requirementBox");async function re(h,e,r,l=""){if(e==="")return 0;let t=h.insert("g").attr("class","label").attr("style",l),i=Q(),o=i.htmlLabels??!0,a=await ye(t,Rt(_e(e)),{width:at(e,i)+50,classes:"markdown-node-label",useHtmlLabels:o,style:l},i),d;if(o){let s=a.children[0],n=J(a);d=s.getBoundingClientRect(),n.attr("width",d.width),n.attr("height",d.height)}else{let s=a.children[0];for(let n of s.children)n.textContent=n.textContent.replaceAll("&gt;",">").replaceAll("&lt;","<"),l&&n.setAttribute("style",l);d=a.getBBox(),d.height+=6}return t.attr("transform",`translate(${-d.width/2},${-d.height/2+r})`),d.height}b(re,"addText");var Fl=b(h=>{switch(h){case"Very High":return"red";case"High":return"orange";case"Medium":return null;case"Low":return"blue";case"Very Low":return"lightblue"}},"colorFromPriority");async function al(h,e,{config:r}){var H,P;let{labelStyles:l,nodeStyles:t}=W(e);e.labelStyle=l||"";let i=10,o=e.width;e.width=(e.width??200)-10;let{shapeSvg:a,bbox:d,label:s}=await z(h,e,q(e)),n=e.padding||10,c="",p;"ticket"in e&&e.ticket&&((H=r==null?void 0:r.kanban)!=null&&H.ticketBaseUrl)&&(c=(P=r==null?void 0:r.kanban)==null?void 0:P.ticketBaseUrl.replace("#TICKET#",e.ticket),p=a.insert("svg:a",":first-child").attr("class","kanban-ticket-link").attr("xlink:href",c).attr("target","_blank"));let g={useHtmlLabels:e.useHtmlLabels,labelStyle:e.labelStyle||"",width:e.width,img:e.img,padding:e.padding||8,centerLabel:!1},y,f;p?{label:y,bbox:f}=await it(p,"ticket"in e&&e.ticket||"",g):{label:y,bbox:f}=await it(a,"ticket"in e&&e.ticket||"",g);let{label:m,bbox:u}=await it(a,"assigned"in e&&e.assigned||"",g);e.width=o;let x=10,w=(e==null?void 0:e.width)||0,M=Math.max(f.height,u.height)/2,S=Math.max(d.height+x*2,(e==null?void 0:e.height)||0)+M,k=-w/2,$=-S/2;s.attr("transform","translate("+(n-w/2)+", "+(-M-d.height/2)+")"),y.attr("transform","translate("+(n-w/2)+", "+(-M+d.height/2)+")"),m.attr("transform","translate("+(n+w/2-u.width-2*i)+", "+(-M+d.height/2)+")");let D,{rx:N,ry:B}=e,{cssStyles:v}=e;if(e.look==="handDrawn"){let C=E.svg(a),R=O(e,{}),A=N||B?C.path(oe(k,$,w,S,N||0),R):C.rectangle(k,$,w,S,R);D=a.insert(()=>A,":first-child"),D.attr("class","basic label-container").attr("style",v||null)}else{D=a.insert("rect",":first-child"),D.attr("class","basic label-container __APA__").attr("style",t).attr("rx",N??5).attr("ry",B??5).attr("x",k).attr("y",$).attr("width",w).attr("height",S);let C="priority"in e&&e.priority;if(C){let R=a.append("line"),A=k+2,T=$+Math.floor((N??0)/2),I=$+S-Math.floor((N??0)/2);R.attr("x1",A).attr("y1",T).attr("x2",A).attr("y2",I).attr("stroke-width","4").attr("stroke",Fl(C))}}return j(e,D),e.height=S,e.intersect=function(C){return L.rect(e,C)},a}b(al,"kanbanItem");var Gl=[{semanticName:"Process",name:"Rectangle",shortName:"rect",description:"Standard process shape",aliases:["proc","process","rectangle"],internalAliases:["squareRect"],handler:Ea},{semanticName:"Event",name:"Rounded Rectangle",shortName:"rounded",description:"Represents an event",aliases:["event"],internalAliases:["roundedRect"],handler:Ta},{semanticName:"Terminal Point",name:"Stadium",shortName:"stadium",description:"Terminal point",aliases:["terminal","pill"],handler:ja},{semanticName:"Subprocess",name:"Framed Rectangle",shortName:"fr-rect",description:"Subprocess",aliases:["subprocess","subproc","framed-rectangle","subroutine"],handler:qa},{semanticName:"Database",name:"Cylinder",shortName:"cyl",description:"Database storage",aliases:["db","database","cylinder"],handler:na},{semanticName:"Start",name:"Circle",shortName:"circle",description:"Starting point",aliases:["circ"],handler:ea},{semanticName:"Decision",name:"Diamond",shortName:"diam",description:"Decision-making step",aliases:["decision","diamond","question"],handler:La},{semanticName:"Prepare Conditional",name:"Hexagon",shortName:"hex",description:"Preparation or condition step",aliases:["hexagon","prepare"],handler:ya},{semanticName:"Data Input/Output",name:"Lean Right",shortName:"lean-r",description:"Represents input or output",aliases:["lean-right","in-out"],internalAliases:["lean_right"],handler:$a},{semanticName:"Data Input/Output",name:"Lean Left",shortName:"lean-l",description:"Represents output or input",aliases:["lean-left","out-in"],internalAliases:["lean_left"],handler:Ma},{semanticName:"Priority Action",name:"Trapezoid Base Bottom",shortName:"trap-b",description:"Priority action",aliases:["priority","trapezoid-bottom","trapezoid"],handler:Qa},{semanticName:"Manual Operation",name:"Trapezoid Base Top",shortName:"trap-t",description:"Represents a manual task",aliases:["manual","trapezoid-top","inv-trapezoid"],internalAliases:["inv_trapezoid"],handler:Sa},{semanticName:"Stop",name:"Double Circle",shortName:"dbl-circ",description:"Represents a stop point",aliases:["double-circle"],internalAliases:["doublecircle"],handler:oa},{semanticName:"Text Block",name:"Text Block",shortName:"text",description:"Text block",handler:Ga},{semanticName:"Card",name:"Notched Rectangle",shortName:"notch-rect",description:"Represents a card",aliases:["card","notched-rectangle"],handler:Kt},{semanticName:"Lined/Shaded Process",name:"Lined Rectangle",shortName:"lin-rect",description:"Lined process shape",aliases:["lined-rectangle","lined-process","lin-proc","shaded-process"],handler:Ia},{semanticName:"Start",name:"Small Circle",shortName:"sm-circ",description:"Small starting point",aliases:["start","small-circle"],internalAliases:["stateStart"],handler:_a},{semanticName:"Stop",name:"Framed Circle",shortName:"fr-circ",description:"Stop point",aliases:["stop","framed-circle"],internalAliases:["stateEnd"],handler:Ha},{semanticName:"Fork/Join",name:"Filled Rectangle",shortName:"fork",description:"Fork or join in process flow",aliases:["join"],internalAliases:["forkJoin"],handler:ga},{semanticName:"Collate",name:"Hourglass",shortName:"hourglass",description:"Represents a collate operation",aliases:["hourglass","collate"],handler:fa},{semanticName:"Comment",name:"Curly Brace",shortName:"brace",description:"Adds a comment",aliases:["comment","brace-l"],handler:la},{semanticName:"Comment Right",name:"Curly Brace",shortName:"brace-r",description:"Adds a comment",handler:sa},{semanticName:"Comment with braces on both sides",name:"Curly Braces",shortName:"braces",description:"Adds a comment",handler:ra},{semanticName:"Com Link",name:"Lightning Bolt",shortName:"bolt",description:"Communication link",aliases:["com-link","lightning-bolt"],handler:va},{semanticName:"Document",name:"Document",shortName:"doc",description:"Represents a document",aliases:["doc","document"],handler:Ja},{semanticName:"Delay",name:"Half-Rounded Rectangle",shortName:"delay",description:"Represents a delay",aliases:["half-rounded-rectangle"],handler:pa},{semanticName:"Direct Access Storage",name:"Horizontal Cylinder",shortName:"h-cyl",description:"Direct access storage",aliases:["das","horizontal-cylinder"],handler:Va},{semanticName:"Disk Storage",name:"Lined Cylinder",shortName:"lin-cyl",description:"Disk storage",aliases:["disk","lined-cylinder"],handler:Da},{semanticName:"Display",name:"Curved Trapezoid",shortName:"curv-trap",description:"Represents a display",aliases:["curved-trapezoid","display"],handler:ia},{semanticName:"Divided Process",name:"Divided Rectangle",shortName:"div-rect",description:"Divided process shape",aliases:["div-proc","divided-rectangle","divided-process"],handler:ha},{semanticName:"Extract",name:"Triangle",shortName:"tri",description:"Extraction process",aliases:["extract","triangle"],handler:Xa},{semanticName:"Internal Storage",name:"Window Pane",shortName:"win-pane",description:"Internal storage",aliases:["internal-storage","window-pane"],handler:Ka},{semanticName:"Junction",name:"Filled Circle",shortName:"f-circ",description:"Junction point",aliases:["junction","filled-circle"],handler:da},{semanticName:"Loop Limit",name:"Trapezoidal Pentagon",shortName:"notch-pent",description:"Loop limit step",aliases:["loop-limit","notched-pentagon"],handler:Za},{semanticName:"Manual File",name:"Flipped Triangle",shortName:"flip-tri",description:"Manual file operation",aliases:["manual-file","flipped-triangle"],handler:ca},{semanticName:"Manual Input",name:"Sloped Rectangle",shortName:"sl-rect",description:"Manual input step",aliases:["manual-input","sloped-rectangle"],handler:Oa},{semanticName:"Multi-Document",name:"Stacked Document",shortName:"docs",description:"Multiple documents",aliases:["documents","st-doc","stacked-document"],handler:Ca},{semanticName:"Multi-Process",name:"Stacked Rectangle",shortName:"st-rect",description:"Multiple processes",aliases:["procs","processes","stacked-rectangle"],handler:Ba},{semanticName:"Stored Data",name:"Bow Tie Rectangle",shortName:"bow-rect",description:"Stored data",aliases:["stored-data","bow-tie-rectangle"],handler:Yt},{semanticName:"Summary",name:"Crossed Circle",shortName:"cross-circ",description:"Summary",aliases:["summary","crossed-circle"],handler:aa},{semanticName:"Tagged Document",name:"Tagged Document",shortName:"tag-doc",description:"Tagged document",aliases:["tag-doc","tagged-document"],handler:Fa},{semanticName:"Tagged Process",name:"Tagged Rectangle",shortName:"tag-rect",description:"Tagged process",aliases:["tagged-rectangle","tag-proc","tagged-process"],handler:za},{semanticName:"Paper Tape",name:"Flag",shortName:"flag",description:"Paper tape",aliases:["paper-tape"],handler:Ya},{semanticName:"Odd",name:"Odd",shortName:"odd",description:"Odd shape",internalAliases:["rect_left_inv_arrow"],handler:Na},{semanticName:"Lined Document",name:"Lined Document",shortName:"lin-doc",description:"Lined document",aliases:["lined-document"],handler:Pa}],Vl=b(()=>{let h=[...Object.entries({state:Wa,choice:Ut,note:Aa,rectWithTitle:Ra,labelRect:ka,iconSquare:ba,iconCircle:ma,icon:ua,iconRounded:xa,imageSquare:wa,anchor:Jt,kanbanItem:al,classBox:el,erBox:Dt,requirementBox:tl}),...Gl.flatMap(e=>[e.shortName,..."aliases"in e?e.aliases:[],..."internalAliases"in e?e.internalAliases:[]].map(r=>[r,e.handler]))];return Object.fromEntries(h)},"generateShapeMap"),ll=Vl();function Ql(h){return h in ll}b(Ql,"isValidShape");var st=new Map;async function Zl(h,e,r){let l,t;e.shape==="rect"&&(e.rx&&e.ry?e.shape="roundedRect":e.shape="squareRect");let i=e.shape?ll[e.shape]:void 0;if(!i)throw new Error(`No such shape: ${e.shape}. Please check your syntax.`);if(e.link){let o;r.config.securityLevel==="sandbox"?o="_top":e.linkTarget&&(o=e.linkTarget||"_blank"),l=h.insert("svg:a").attr("xlink:href",e.link).attr("target",o??null),t=await i(l,e,r)}else t=await i(h,e,r),l=t;return e.tooltip&&t.attr("title",e.tooltip),st.set(e.id,l),e.haveCallback&&l.attr("class",l.attr("class")+" clickable"),l}b(Zl,"insertNode");var ls=b((h,e)=>{st.set(e.id,h)},"setNodeElem"),ss=b(()=>{st.clear()},"clear"),rs=b(h=>{let e=st.get(h.id);G.trace("Transforming node",h.diff,h,"translate("+(h.x-h.width/2-5)+", "+h.width/2+")");let r=8,l=h.diff||0;return h.clusterNode?e.attr("transform","translate("+(h.x+l-h.width/2)+", "+(h.y-h.height/2-r)+")"):e.attr("transform","translate("+h.x+", "+h.y+")"),l},"positionNode");export{ft as $,z as C,j as M,Ql as Q,rs as a,kl as n,ss as o,ls as r,Zl as s,E as v,as as x,ts as y};
