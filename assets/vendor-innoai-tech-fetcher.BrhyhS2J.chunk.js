import{O as e,B as t,S as s,g as n,t as r,h as a,e as i,j as o,o as u}from"./vendor-rxjs.Dik18ezb.chunk.js";import{b as c,v as p,d as h,e as d,a as l}from"./vendor-innoai-tech-lodash.CZ0giwzL.chunk.js";let f=(e,t)=>new g(e,t);class g extends e{constructor(e,t){super(e=>this._success$.subscribe(e)),this.createConfig=e,this.fetcher=t}requesting$=new t(!1);error$=new s;_success$=new s;_input$=new s;get operationID(){return this.createConfig.operationID}unsubscribe=this._input$.pipe(n(e=>(this.requesting$.next(!0),i(this.fetcher.request(this.createConfig(e))).pipe(r(e=>this._success$.next(e)),o(e=>(this.error$.next(e),u(e)))))),r(()=>{this.requesting$.next(!1)}),a()).subscribe();_prevInputs;next=e=>{let t=c(e)?e(this._prevInputs):e;this._prevInputs=t,this._input$.next(t)};toHref=e=>this.fetcher.toHref(this.createConfig(e))}let y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e["Content-Type"]||e["content-type"]||""},$=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e["Content-Type"]&&(e["Content-Type"]=void 0),e["content-type"]&&(e["content-type"]=void 0)},m=e=>y(e).includes("multipart/form-data"),b=e=>y(e).includes("application/x-www-form-urlencoded"),w=e=>{let t=new URLSearchParams,s=(e,n)=>h(n)?void p(n,t=>{s(e,t)}):d(n)?void s(e,JSON.stringify(n)):void(!l(n)&&0!==`${n}`.length&&t.append(e,`${n}`));return p(e,(e,t)=>{s(t,e)}),t.toString()},v=(e,t)=>{if(m(t)){$(t);let s=new FormData,n=(e,t)=>{t instanceof File||t instanceof Blob?s.append(e,t):h(t)?p(t,t=>n(e,t)):d(t)?s.append(e,JSON.stringify(t)):s.append(e,t)};return p(e,(e,t)=>n(t,e)),s}return b(t)?w(e):h(e)||d(e)?JSON.stringify(e):e},x=e=>{let{paramsSerializer:t,transformRequestBody:s}=e;return{toHref:e=>{let s=t(e.params);return s.length&&!s.startsWith("?")&&(s="?"+s),`${e.url}${s}`},request:e=>{let n={method:e.method,headers:e.headers||{},body:s(e.body,e.headers||{})};return fetch(`${e.url}?${t(e.params)}`,n).then(async t=>{let s;s=t.headers.get("Content-Type")?.includes("application/json")?await t.json():t.headers.get("Content-Type")?.includes("application/octet-stream")?await t.blob():await t.text();let n={config:e,status:t.status,headers:{}};for(let[e,s]of t.headers)n.headers[e]=s;return n.body=s,n}).then(e=>{if(e.status>=400)throw e.error=e.body,e;return e})}}};export{f as a,x as c,w as p,v as t};
